<svg contentStyleType='text/css' data-diagram-type='ACTIVITY' height='461px' preserveAspectRatio='none' style='width:341px;height:461px;background:#FFFFFF;' version='1.1' viewBox='0 0 341 461' width='341px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><ellipse cx='170.8066' cy='20' fill='#222222' rx='10' ry='10' style='stroke:#222222;stroke-width:1;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='186.2129' x='77.7002' y='50'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='166.2129' x='87.7002' y='71.6016'>Controller/Resource method</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='191.1641' x='75.2246' y='104.1328'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='171.1641' x='85.2246' y='125.7344'>MorphiaRepo (repository call)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='190.3906' x='75.6113' y='158.2656'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='170.3906' x='85.6113' y='179.8672'>Build base filters (user query)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='319.6133' x='11' y='212.3984'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='299.6133' x='21' y='234'>ruleContext.getFilters(base, pctx, rctx, modelClass)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='267.084' x='37.2646' y='266.5313'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='247.084' x='47.2646' y='288.1328'>Effective filters = base AND security filters</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='288.834' x='26.3896' y='320.6641'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='268.834' x='36.3896' y='342.2656'>Apply filters to operation (find/update/delete)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='107.1348' x='117.2393' y='374.7969'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='87.1348' x='127.2393' y='396.3984'>Results scoped</text><ellipse cx='170.8066' cy='439.9297' fill='none' rx='11' ry='11' style='stroke:#222222;stroke-width:1;'/><ellipse cx='170.8066' cy='439.9297' fill='#222222' rx='6' ry='6' style='stroke:#222222;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='30' y2='50'/><polygon fill='#181818' points='166.8066,40,170.8066,50,174.8066,40,170.8066,44' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='84.1328' y2='104.1328'/><polygon fill='#181818' points='166.8066,94.1328,170.8066,104.1328,174.8066,94.1328,170.8066,98.1328' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='138.2656' y2='158.2656'/><polygon fill='#181818' points='166.8066,148.2656,170.8066,158.2656,174.8066,148.2656,170.8066,152.2656' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='192.3984' y2='212.3984'/><polygon fill='#181818' points='166.8066,202.3984,170.8066,212.3984,174.8066,202.3984,170.8066,206.3984' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='246.5313' y2='266.5313'/><polygon fill='#181818' points='166.8066,256.5313,170.8066,266.5313,174.8066,256.5313,170.8066,260.5313' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='300.6641' y2='320.6641'/><polygon fill='#181818' points='166.8066,310.6641,170.8066,320.6641,174.8066,310.6641,170.8066,314.6641' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='354.7969' y2='374.7969'/><polygon fill='#181818' points='166.8066,364.7969,170.8066,374.7969,174.8066,364.7969,170.8066,368.7969' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='170.8066' x2='170.8066' y1='408.9297' y2='428.9297'/><polygon fill='#181818' points='166.8066,418.9297,170.8066,428.9297,174.8066,418.9297,170.8066,422.9297' style='stroke:#181818;stroke-width:1;'/></g></svg>