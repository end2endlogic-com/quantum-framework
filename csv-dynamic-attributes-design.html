<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>CSV Import Support for Dynamic Attributes</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book">
<div id="header">
<h1>CSV Import Support for Dynamic Attributes</h1>
<div class="details">
<span id="revnumber">version 1.2.4-SNAPSHOT,</span>
<span id="revdate">2026-02-02T21:46:50Z</span>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_executive_summary">1. Executive Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document proposes a design for importing <code>dynamicAttributeSets</code> and <code>dynamicAttributes</code> via CSV.
The challenge is that dynamic attributes are schema-less, nested structures where the attribute names
and types are not known at compile time, yet CSV is an inherently flat, column-based format.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_background_dynamic_attributes_data_model">2. Background: Dynamic Attributes Data Model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_current_structure">2.1. Current Structure</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// A model with dynamic attributes</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Product</span> <span class="directive">extends</span> BaseModel {
    <span class="directive">protected</span> <span class="predefined-type">String</span> name;
    <span class="directive">protected</span> <span class="predefined-type">String</span> sku;
    <span class="directive">protected</span> <span class="predefined-type">List</span>&lt;DynamicAttributeSet&gt; dynamicAttributeSets = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
}

<span class="comment">// Container for related attributes</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">DynamicAttributeSet</span> {
    <span class="directive">protected</span> <span class="predefined-type">String</span> name;                          <span class="comment">// e.g., &quot;logistics&quot;, &quot;compliance&quot;</span>
    <span class="directive">protected</span> <span class="predefined-type">List</span>&lt;DynamicAttribute&gt; attributes;
}

<span class="comment">// Individual attribute with type and value</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">DynamicAttribute</span> {
    <span class="directive">protected</span> <span class="predefined-type">String</span> id;
    <span class="directive">protected</span> <span class="predefined-type">String</span> name;                          <span class="comment">// e.g., &quot;weight&quot;, &quot;hazmat_class&quot;</span>
    <span class="directive">protected</span> DynamicAttributeType type;            <span class="comment">// String, Integer, Boolean, Date, etc.</span>
    <span class="directive">protected</span> <span class="predefined-type">Object</span> value;                         <span class="comment">// The actual value</span>
    <span class="directive">protected</span> <span class="predefined-type">Object</span> defaultValue;
    <span class="directive">protected</span> <span class="type">boolean</span> required;
    <span class="directive">protected</span> <span class="type">boolean</span> hidden;
    <span class="comment">// ... other metadata</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_json_representation">2.2. Example JSON Representation</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Widget Pro</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">sku</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">WGT-001</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeSets</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">logistics</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: [
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Double</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="float">2.5</span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">10x5x3</span><span class="delimiter">&quot;</span></span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">hazmat</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Boolean</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span> }
      ]
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">compliance</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">attributes</span><span class="delimiter">&quot;</span></span>: [
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ce_certified</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Boolean</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">certification_date</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2024-01-15</span><span class="delimiter">&quot;</span></span> }
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_design_challenges">3. Design Challenges</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Flat vs Nested</strong>: CSV is flat; dynamic attributes are deeply nested (model → sets → attributes)</p>
</li>
<li>
<p><strong>Schema Variability</strong>: Different rows may have different dynamic attributes</p>
</li>
<li>
<p><strong>Type Coercion</strong>: CSV values are strings; dynamic attributes have typed values</p>
</li>
<li>
<p><strong>Merge Semantics</strong>: Should import replace all attributes or merge with existing?</p>
</li>
<li>
<p><strong>Validation</strong>: How to validate against DynamicAttributeSetDefinition if one exists?</p>
</li>
<li>
<p><strong>Performance</strong>: Potentially many columns for dynamic attributes</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_proposed_design_all_three_strategies_supported">4. Proposed Design: All Three Strategies Supported</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The design supports <strong>all three import strategies</strong>, configurable via ImportProfile.
Each strategy has its use cases, and users can choose based on their data shape and tooling.</p>
</div>
<div class="sect2">
<h3 id="_strategy_overview">4.1. Strategy Overview</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Strategy</th>
<th class="tableblock halign-left valign-top">Best For</th>
<th class="tableblock halign-left valign-top">CSV Style</th>
<th class="tableblock halign-left valign-top">Configuration</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DOT_NOTATION</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spreadsheet-friendly, sparse attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dyn.setName.attrName</code> columns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dynamicAttributeStrategy: DOT_NOTATION</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JSON_COLUMN</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complex structures, programmatic generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>dynamicAttributes</code> JSON column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dynamicAttributeStrategy: JSON_COLUMN</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VERTICAL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute-centric imports, bulk attribute loading</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple rows per entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dynamicAttributeStrategy: VERTICAL</code></p></td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="sect2">
<h3 id="_strategy_1_dot_notation_header_convention">4.2. Strategy 1: DOT_NOTATION (Header Convention)</h3>
<div class="paragraph">
<p>Use a special header prefix and dot notation to map CSV columns to dynamic attributes.</p>
</div>
<div class="sect3">
<h4 id="_header_format">4.2.1. Header Format</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>dyn.&lt;setName&gt;.&lt;attributeName&gt;
dyn.&lt;setName&gt;.&lt;attributeName&gt;:type</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_csv">4.2.2. Example CSV</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">name,sku,dyn.logistics.weight,dyn.logistics.dimensions,dyn.logistics.hazmat,dyn.compliance.ce_certified,dyn.compliance.certification_date
&quot;Widget Pro&quot;,&quot;WGT-001&quot;,2.5,&quot;10x5x3&quot;,false,true,&quot;2024-01-15&quot;
&quot;Gadget X&quot;,&quot;GDG-002&quot;,1.2,&quot;5x5x2&quot;,false,true,&quot;2024-03-20&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_inference">4.2.3. Type Inference</h4>
<div class="paragraph">
<p>Types can be inferred or explicitly specified:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Header</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inferred from value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dyn.logistics.weight</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parser attempts: Boolean → Integer → Long → Double → Date → String</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit type suffix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dyn.logistics.weight:Double</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forces specific type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">From DynamicAttributeSetDefinition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dyn.logistics.weight</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Looks up type from definition if exists</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">From ImportProfile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configured in profile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type specified in column mapping</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_best_for">4.2.4. Best For</h4>
<div class="ulist">
<ul>
<li>
<p>Spreadsheet editing (Excel, Google Sheets)</p>
</li>
<li>
<p>Human-readable CSV files</p>
</li>
<li>
<p>Sparse attributes (some rows have attributes, others don&#8217;t)</p>
</li>
<li>
<p>When attribute names are known upfront</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_strategy_2_json_column_json_in_cell">4.3. Strategy 2: JSON_COLUMN (JSON-in-Cell)</h3>
<div class="paragraph">
<p>Store the entire dynamic attributes structure as JSON in a dedicated CSV column.</p>
</div>
<div class="sect3">
<h4 id="_column_format">4.3.1. Column Format</h4>
<div class="paragraph">
<p>The column name is configurable (default: <code>dynamicAttributes</code>). The value is a JSON object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">setName</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrName</span><span class="delimiter">&quot;</span></span>: <span class="error">v</span><span class="error">a</span><span class="error">l</span><span class="error">u</span><span class="error">e</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrName2</span><span class="delimiter">&quot;</span></span>: <span class="error">v</span><span class="error">a</span><span class="error">l</span><span class="error">u</span><span class="error">e</span><span class="integer">2</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">setName2</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrName</span><span class="delimiter">&quot;</span></span>: <span class="error">v</span><span class="error">a</span><span class="error">l</span><span class="error">u</span><span class="error">e</span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_csv_2">4.3.2. Example CSV</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">name,sku,dynamicAttributes
&quot;Widget Pro&quot;,&quot;WGT-001&quot;,&quot;{&quot;&quot;logistics&quot;&quot;:{&quot;&quot;weight&quot;&quot;:2.5,&quot;&quot;dimensions&quot;&quot;:&quot;&quot;10x5x3&quot;&quot;,&quot;&quot;hazmat&quot;&quot;:false},&quot;&quot;compliance&quot;&quot;:{&quot;&quot;ce_certified&quot;&quot;:true,&quot;&quot;certification_date&quot;&quot;:&quot;&quot;2024-01-15&quot;&quot;}}&quot;
&quot;Gadget X&quot;,&quot;GDG-002&quot;,&quot;{&quot;&quot;logistics&quot;&quot;:{&quot;&quot;weight&quot;&quot;:1.2,&quot;&quot;dimensions&quot;&quot;:&quot;&quot;5x5x2&quot;&quot;}}&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_alternative_relaxed_json_format">4.3.3. Alternative: Relaxed JSON Format</h4>
<div class="paragraph">
<p>For easier editing, support a relaxed format with single quotes or unquoted keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">name,sku,dynamicAttributes
&quot;Widget Pro&quot;,&quot;WGT-001&quot;,&quot;{'logistics':{'weight':2.5,'hazmat':false},'compliance':{'ce_certified':true}}&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_full_structure_json_optional">4.3.4. Full Structure JSON (Optional)</h4>
<div class="paragraph">
<p>For complete control, support full DynamicAttributeSet structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">name,sku,dynamicAttributeSets
&quot;Widget Pro&quot;,&quot;WGT-001&quot;,&quot;[{&quot;&quot;name&quot;&quot;:&quot;&quot;logistics&quot;&quot;,&quot;&quot;attributes&quot;&quot;:[{&quot;&quot;name&quot;&quot;:&quot;&quot;weight&quot;&quot;,&quot;&quot;type&quot;&quot;:&quot;&quot;Double&quot;&quot;,&quot;&quot;value&quot;&quot;:2.5}]}]&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_best_for_2">4.3.5. Best For</h4>
<div class="ulist">
<ul>
<li>
<p>Programmatically generated CSV files</p>
</li>
<li>
<p>Complex attribute structures</p>
</li>
<li>
<p>When attributes vary significantly between rows</p>
</li>
<li>
<p>Integration with systems that export JSON</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_strategy_3_vertical_multiple_rows_per_entity">4.4. Strategy 3: VERTICAL (Multiple Rows per Entity)</h3>
<div class="paragraph">
<p>One row per attribute, with a parent identifier to group rows into entities.</p>
</div>
<div class="sect3">
<h4 id="_column_format_2">4.4.1. Column Format</h4>
<div class="paragraph">
<p>Required columns:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_entityKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier to group rows (e.g., SKU, refName)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_attrSet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dynamic attribute set name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_attrName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute name within the set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_attrType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute type (optional, can be inferred)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_attrValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The attribute value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Column names are configurable in ImportProfile.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_csv_3">4.4.2. Example CSV</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">_entityKey,_attrSet,_attrName,_attrType,_attrValue
&quot;WGT-001&quot;,&quot;logistics&quot;,&quot;weight&quot;,&quot;Double&quot;,&quot;2.5&quot;
&quot;WGT-001&quot;,&quot;logistics&quot;,&quot;dimensions&quot;,&quot;String&quot;,&quot;10x5x3&quot;
&quot;WGT-001&quot;,&quot;logistics&quot;,&quot;hazmat&quot;,&quot;Boolean&quot;,&quot;false&quot;
&quot;WGT-001&quot;,&quot;compliance&quot;,&quot;ce_certified&quot;,&quot;Boolean&quot;,&quot;true&quot;
&quot;WGT-001&quot;,&quot;compliance&quot;,&quot;certification_date&quot;,&quot;Date&quot;,&quot;2024-01-15&quot;
&quot;GDG-002&quot;,&quot;logistics&quot;,&quot;weight&quot;,&quot;Double&quot;,&quot;1.2&quot;
&quot;GDG-002&quot;,&quot;logistics&quot;,&quot;dimensions&quot;,&quot;String&quot;,&quot;5x5x2&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_with_entity_fields">4.4.3. With Entity Fields</h4>
<div class="paragraph">
<p>Include entity fields on each row (redundant but allows single-pass processing):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">sku,name,_attrSet,_attrName,_attrType,_attrValue
&quot;WGT-001&quot;,&quot;Widget Pro&quot;,&quot;logistics&quot;,&quot;weight&quot;,&quot;Double&quot;,&quot;2.5&quot;
&quot;WGT-001&quot;,&quot;Widget Pro&quot;,&quot;logistics&quot;,&quot;dimensions&quot;,&quot;String&quot;,&quot;10x5x3&quot;
&quot;WGT-001&quot;,&quot;Widget Pro&quot;,&quot;compliance&quot;,&quot;ce_certified&quot;,&quot;Boolean&quot;,&quot;true&quot;
&quot;GDG-002&quot;,&quot;Gadget X&quot;,&quot;logistics&quot;,&quot;weight&quot;,&quot;Double&quot;,&quot;1.2&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_best_for_3">4.4.4. Best For</h4>
<div class="ulist">
<ul>
<li>
<p>Bulk attribute imports (adding many attributes to existing entities)</p>
</li>
<li>
<p>Attribute-focused workflows</p>
</li>
<li>
<p>When entity already exists and you&#8217;re just updating attributes</p>
</li>
<li>
<p>Exports from attribute management systems</p>
</li>
</ul>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_hybrid_mode_combining_strategies">4.5. Hybrid Mode: Combining Strategies</h3>
<div class="paragraph">
<p>Enable multiple strategies in a single import by setting <code>dynamicAttributeStrategy: HYBRID</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">name,sku,dyn.logistics.weight,dynamicAttributes
&quot;Widget Pro&quot;,&quot;WGT-001&quot;,2.5,&quot;{&quot;&quot;compliance&quot;&quot;:{&quot;&quot;ce_certified&quot;&quot;:true}}&quot;
&quot;Gadget X&quot;,&quot;GDG-002&quot;,1.2,&quot;{&quot;&quot;compliance&quot;&quot;:{&quot;&quot;rohs&quot;&quot;:true}}&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Processing order:
1. DOT_NOTATION columns processed first
2. JSON_COLUMN merged/overlaid
3. Explicit ColumnMappings applied last (highest priority)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_detailed_design_dot_notation_approach">5. Detailed Design: Dot Notation Approach</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuration_in_importprofile">5.1. Configuration in ImportProfile</h3>
<div class="sect3">
<h4 id="_new_enums">5.1.1. New Enums</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * Strategy for importing dynamic attributes from CSV.
 */</span>
<span class="directive">public</span> <span class="type">enum</span> DynamicAttributeImportStrategy {
    <span class="comment">/**
     * Disable dynamic attribute import.
     */</span>
    NONE,

    <span class="comment">/**
     * Use dot-notation headers: dyn.setName.attrName[:type]
     * Best for spreadsheet-friendly imports.
     */</span>
    DOT_NOTATION,

    <span class="comment">/**
     * Use a single JSON column containing all dynamic attributes.
     * Best for programmatic imports.
     */</span>
    JSON_COLUMN,

    <span class="comment">/**
     * Use vertical format with multiple rows per entity.
     * Best for attribute-centric imports.
     */</span>
    VERTICAL,

    <span class="comment">/**
     * Support both DOT_NOTATION and JSON_COLUMN in same import.
     * DOT_NOTATION processed first, JSON_COLUMN merged on top.
     */</span>
    HYBRID
}

<span class="comment">/**
 * Strategy for merging imported dynamic attributes with existing.
 */</span>
<span class="directive">public</span> <span class="type">enum</span> DynamicAttributeMergeStrategy {
    <span class="comment">/**
     * Remove all existing attributes, replace with imported.
     */</span>
    REPLACE,

    <span class="comment">/**
     * Keep existing attributes, update matching, add new.
     */</span>
    MERGE,

    <span class="comment">/**
     * Keep existing attributes, only add new (no updates to existing).
     */</span>
    APPEND
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dynamicattributemapping">5.1.2. DynamicAttributeMapping</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="annotation">@Builder</span>
<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">DynamicAttributeMapping</span> {
    <span class="comment">/**
     * The CSV column name or pattern.
     * For DOT_NOTATION: can use &quot;dyn.{setName}.{attrName}&quot; for auto-discovery.
     * For JSON_COLUMN: the column containing JSON.
     * For VERTICAL: not used (uses verticalConfig).
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> sourceColumn;

    <span class="comment">/**
     * Target attribute set name. If null, extracted from header.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> targetSetName;

    <span class="comment">/**
     * Target attribute name. If null, extracted from header.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> targetAttributeName;

    <span class="comment">/**
     * Force a specific type. If null, inferred.
     */</span>
    <span class="directive">private</span> DynamicAttributeType type;

    <span class="comment">/**
     * Date/time format for Date/DateTime types.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> dateFormat;

    <span class="comment">/**
     * Reference to DynamicAttributeSetDefinition for validation.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> definitionRefName;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_verticalformatconfig">5.1.3. VerticalFormatConfig</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="annotation">@Builder</span>
<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">VerticalFormatConfig</span> {
    <span class="comment">/**
     * Column containing the entity key for grouping rows.
     * Default: &quot;_entityKey&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> entityKeyColumn = <span class="string"><span class="delimiter">&quot;</span><span class="content">_entityKey</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Field on the entity that matches entityKeyColumn values.
     * Used for lookups when updating existing entities.
     * Default: &quot;refName&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> entityKeyField = <span class="string"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Column containing the attribute set name.
     * Default: &quot;_attrSet&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> setNameColumn = <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrSet</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Column containing the attribute name.
     * Default: &quot;_attrName&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> attrNameColumn = <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrName</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Column containing the attribute type (optional).
     * Default: &quot;_attrType&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> attrTypeColumn = <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrType</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Column containing the attribute value.
     * Default: &quot;_attrValue&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> attrValueColumn = <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrValue</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * If true, entity fields can be included on each row.
     * First occurrence of each field value is used.
     * Default: false
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="type">boolean</span> allowEntityFieldsOnRows = <span class="predefined-constant">false</span>;

    <span class="comment">/**
     * Columns to exclude from entity field processing.
     * Typically the attribute columns themselves.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; excludeFromEntityFields;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jsoncolumnconfig">5.1.4. JsonColumnConfig</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Data</span>
<span class="annotation">@NoArgsConstructor</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="annotation">@Builder</span>
<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">JsonColumnConfig</span> {
    <span class="comment">/**
     * The CSV column name containing JSON dynamic attributes.
     * Default: &quot;dynamicAttributes&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> columnName = <span class="string"><span class="delimiter">&quot;</span><span class="content">dynamicAttributes</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * JSON format style.
     * COMPACT: {&quot;setName&quot;:{&quot;attrName&quot;:value}} - values only, types inferred
     * FULL: [{&quot;name&quot;:&quot;setName&quot;,&quot;attributes&quot;:[{&quot;name&quot;:&quot;attrName&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;x&quot;}]}]
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> JsonFormatStyle formatStyle = JsonFormatStyle.COMPACT;

    <span class="comment">/**
     * Allow relaxed JSON parsing (single quotes, unquoted keys).
     * Default: true
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="type">boolean</span> relaxedParsing = <span class="predefined-constant">true</span>;
}

<span class="directive">public</span> <span class="type">enum</span> JsonFormatStyle {
    <span class="comment">/**
     * Compact format: {&quot;setName&quot;:{&quot;attrName&quot;:value,...},...}
     * Types are inferred from JSON value types.
     */</span>
    COMPACT,

    <span class="comment">/**
     * Full structure matching DynamicAttributeSet model:
     * [{&quot;name&quot;:&quot;setName&quot;,&quot;attributes&quot;:[{&quot;name&quot;:&quot;attrName&quot;,&quot;type&quot;:&quot;Type&quot;,&quot;value&quot;:val}]}]
     */</span>
    FULL
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_updated_importprofile">5.1.5. Updated ImportProfile</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ImportProfile</span> <span class="directive">extends</span> BaseModel {
    <span class="comment">// ... existing fields ...</span>

    <span class="comment">// ═══════════════════════════════════════════════════════════════</span>
    <span class="comment">// DYNAMIC ATTRIBUTE CONFIGURATION</span>
    <span class="comment">// ═══════════════════════════════════════════════════════════════</span>

    <span class="comment">/**
     * Strategy for importing dynamic attributes.
     * Default: NONE (disabled)
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> DynamicAttributeImportStrategy dynamicAttributeStrategy =
            DynamicAttributeImportStrategy.NONE;

    <span class="comment">/**
     * Strategy for merging imported dynamic attributes with existing.
     * Default: MERGE
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> DynamicAttributeMergeStrategy dynamicAttributeMergeStrategy =
            DynamicAttributeMergeStrategy.MERGE;

    <span class="comment">// --- DOT_NOTATION Configuration ---</span>

    <span class="comment">/**
     * Prefix for auto-discovery of dynamic attribute columns.
     * Only used when strategy is DOT_NOTATION or HYBRID.
     * Default: &quot;dyn.&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> dynamicAttributePrefix = <span class="string"><span class="delimiter">&quot;</span><span class="content">dyn.</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * Enable auto-discovery of dynamic attribute columns by prefix.
     * If false, only explicitly mapped columns are processed.
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="type">boolean</span> enableDynamicAttributeDiscovery = <span class="predefined-constant">true</span>;

    <span class="comment">// --- JSON_COLUMN Configuration ---</span>

    <span class="comment">/**
     * Configuration for JSON column strategy.
     * Only used when strategy is JSON_COLUMN or HYBRID.
     */</span>
    <span class="directive">private</span> JsonColumnConfig jsonColumnConfig;

    <span class="comment">// --- VERTICAL Configuration ---</span>

    <span class="comment">/**
     * Configuration for vertical format strategy.
     * Only used when strategy is VERTICAL.
     */</span>
    <span class="directive">private</span> VerticalFormatConfig verticalFormatConfig;

    <span class="comment">// --- Common Configuration ---</span>

    <span class="comment">/**
     * Explicit mappings for dynamic attribute columns.
     * Used for DOT_NOTATION when auto-discovery is disabled,
     * or to override inferred types/settings.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;DynamicAttributeMapping&gt; dynamicAttributeMappings;

    <span class="comment">/**
     * Reference to DynamicAttributeSetDefinition for type/validation lookup.
     * If specified, validates imported attributes against this definition.
     */</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> dynamicAttributeDefinitionRefName;

    <span class="comment">/**
     * If true, only allow attributes defined in the DynamicAttributeSetDefinition.
     * Unknown attributes will cause validation errors.
     * Default: false (allow any attributes)
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="type">boolean</span> strictDynamicAttributeValidation = <span class="predefined-constant">false</span>;

    <span class="comment">/**
     * Default type when type cannot be inferred.
     * Default: String
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> DynamicAttributeType defaultDynamicAttributeType =
            DynamicAttributeType.String;

    <span class="comment">/**
     * Date format for parsing Date type attributes.
     * Default: &quot;yyyy-MM-dd&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> dynamicAttributeDateFormat = <span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy-MM-dd</span><span class="delimiter">&quot;</span></span>;

    <span class="comment">/**
     * DateTime format for parsing DateTime type attributes.
     * Default: &quot;yyyy-MM-dd'T'HH:mm:ss&quot;
     */</span>
    <span class="annotation">@Builder</span>.Default
    <span class="directive">private</span> <span class="predefined-type">String</span> dynamicAttributeDateTimeFormat = <span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy-MM-dd'T'HH:mm:ss</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_processing_pipeline">5.2. Processing Pipeline</h3>
<div class="sect3">
<h4 id="_overall_flow">5.2.1. Overall Flow</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>CSV File
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 0. Strategy Detection                                            │
│    - Read ImportProfile.dynamicAttributeStrategy                 │
│    - Route to appropriate processor                              │
└─────────────────────────────────────────────────────────────────┘
   │
   ├── DOT_NOTATION ──► DotNotationProcessor
   ├── JSON_COLUMN ───► JsonColumnProcessor
   ├── VERTICAL ──────► VerticalFormatProcessor
   └── HYBRID ────────► Both Dot + Json processors</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dot_notation_processing_pipeline">5.2.2. DOT_NOTATION Processing Pipeline</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>CSV Row
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 1. Header Parsing (once per import)                              │
│    - Identify columns with &quot;dyn.&quot; prefix                         │
│    - Parse: dyn.&lt;setName&gt;.&lt;attrName&gt;[:type]                     │
│    - Build column → (setName, attrName, type) mapping           │
│    - Validate header format                                      │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. Regular Column Processing                                     │
│    - Process non-dynamic columns as before                       │
│    - Apply existing transformations                              │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 3. Dynamic Attribute Extraction                                  │
│    - For each dyn.* column with non-empty value:                │
│      a. Get parsed header info (setName, attrName)              │
│      b. Determine type (explicit &gt; definition &gt; inferred)       │
│      c. Convert string value to typed value                     │
│      d. Create DynamicAttribute object                          │
│    - Group attributes by set name                               │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 4. Set Assembly                                                  │
│    - Create DynamicAttributeSet for each set name               │
│    - Populate with collected attributes                         │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
[Merge &amp; Validate] ───► Bean with dynamicAttributeSets</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_json_column_processing_pipeline">5.2.3. JSON_COLUMN Processing Pipeline</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>CSV Row
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 1. Locate JSON Column                                            │
│    - Find column by name (default: &quot;dynamicAttributes&quot;)          │
│    - Skip if empty/null                                          │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. Parse JSON                                                    │
│    - If COMPACT format:                                          │
│      Parse {&quot;setName&quot;:{&quot;attrName&quot;:value,...},...}               │
│      Infer types from JSON value types                          │
│    - If FULL format:                                            │
│      Parse as List&lt;DynamicAttributeSet&gt;                         │
│      Use explicit types from structure                          │
│    - Handle relaxed JSON if enabled                             │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 3. Build Attribute Sets                                          │
│    - Create DynamicAttributeSet for each entry                  │
│    - Create DynamicAttribute for each nested entry              │
│    - Map JSON types to DynamicAttributeType                     │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
[Merge &amp; Validate] ───► Bean with dynamicAttributeSets</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vertical_processing_pipeline">5.2.4. VERTICAL Processing Pipeline</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>CSV File (grouped by entity)
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 1. Group Rows by Entity Key                                      │
│    - Read all rows                                               │
│    - Group by _entityKey column value                           │
│    - Each group becomes one entity                              │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. For Each Entity Group                                         │
│    ┌─────────────────────────────────────────────────────────┐  │
│    │ a. Extract entity fields (if allowEntityFieldsOnRows)   │  │
│    │    - Use first row's values for non-attribute columns   │  │
│    └─────────────────────────────────────────────────────────┘  │
│    ┌─────────────────────────────────────────────────────────┐  │
│    │ b. Collect attributes from all rows in group            │  │
│    │    - Read _attrSet, _attrName, _attrType, _attrValue    │  │
│    │    - Group by set name                                   │  │
│    └─────────────────────────────────────────────────────────┘  │
│    ┌─────────────────────────────────────────────────────────┐  │
│    │ c. Build DynamicAttributeSets                           │  │
│    │    - Create set for each unique _attrSet value          │  │
│    │    - Add attributes to appropriate set                   │  │
│    └─────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 3. Entity Resolution                                             │
│    - If entity exists (lookup by entityKeyField):               │
│      Apply merge strategy with existing                         │
│    - If entity is new:                                          │
│      Create with collected attributes                           │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
[Validate] ───► Entities with dynamicAttributeSets</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hybrid_processing_pipeline">5.2.5. HYBRID Processing Pipeline</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>CSV Row
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 1. Process DOT_NOTATION columns first                            │
│    - Extract dyn.* columns                                       │
│    - Build initial attribute sets                               │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. Process JSON_COLUMN                                           │
│    - Parse JSON column                                           │
│    - Merge with DOT_NOTATION results:                           │
│      * Same set+attr: JSON value overwrites                     │
│      * New attrs: Added to sets                                 │
│      * New sets: Added to list                                  │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
[Merge &amp; Validate] ───► Bean with dynamicAttributeSets</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_common_merge_validate_stage">5.2.6. Common: Merge &amp; Validate Stage</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Collected Dynamic Attributes
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ Merge with Existing (if updating)                                │
│    - REPLACE: Clear existing sets, add new                      │
│    - MERGE: Update existing attrs, add new attrs/sets           │
│    - APPEND: Only add attrs that don't exist                    │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
┌─────────────────────────────────────────────────────────────────┐
│ Validation                                                       │
│    - If DynamicAttributeSetDefinition exists:                    │
│      a. Validate required attributes are present                 │
│      b. Validate types match definition                          │
│      c. Validate Select/MultiSelect values are allowed           │
│    - If strictDynamicAttributeValidation:                       │
│      d. Reject unknown attributes not in definition             │
└─────────────────────────────────────────────────────────────────┘
   │
   ▼
Bean with populated dynamicAttributeSets</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_new_spi_dynamicattributeprocessor">5.3. New SPI: DynamicAttributeProcessor</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.e2eq.framework.imports.spi</span>;

<span class="comment">/**
 * Processes dynamic attribute columns during CSV import.
 */</span>
<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">DynamicAttributeProcessor</span> {

    <span class="annotation">@Inject</span>
    DynamicAttributeSetDefinitionRepo definitionRepo;

    <span class="comment">/**
     * Parse a dynamic attribute header.
     *
     * @param header the CSV header (e.g., &quot;dyn.logistics.weight:Double&quot;)
     * @param prefix the dynamic attribute prefix (default &quot;dyn.&quot;)
     * @return parsed header info, or null if not a dynamic attribute column
     */</span>
    <span class="directive">public</span> ParsedDynamicHeader parseHeader(<span class="predefined-type">String</span> header, <span class="predefined-type">String</span> prefix) {
        <span class="keyword">if</span> (!header.startsWith(prefix)) {
            <span class="keyword">return</span> <span class="predefined-constant">null</span>;
        }

        <span class="predefined-type">String</span> remainder = header.substring(prefix.length());
        <span class="comment">// Parse: setName.attrName[:type]</span>
        <span class="type">int</span> typeIdx = remainder.lastIndexOf(<span class="string"><span class="delimiter">'</span><span class="content">:</span><span class="delimiter">'</span></span>);
        <span class="predefined-type">String</span> path;
        DynamicAttributeType explicitType = <span class="predefined-constant">null</span>;

        <span class="keyword">if</span> (typeIdx &gt; <span class="integer">0</span>) {
            path = remainder.substring(<span class="integer">0</span>, typeIdx);
            <span class="predefined-type">String</span> typeStr = remainder.substring(typeIdx + <span class="integer">1</span>);
            <span class="keyword">try</span> {
                explicitType = DynamicAttributeType.fromValue(typeStr);
            } <span class="keyword">catch</span> (<span class="exception">IllegalArgumentException</span> e) {
                <span class="comment">// Invalid type, treat as part of name</span>
                path = remainder;
            }
        } <span class="keyword">else</span> {
            path = remainder;
        }

        <span class="type">int</span> dotIdx = path.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">.</span><span class="delimiter">'</span></span>);
        <span class="keyword">if</span> (dotIdx &lt;= <span class="integer">0</span> || dotIdx &gt;= path.length() - <span class="integer">1</span>) {
            <span class="keyword">return</span> <span class="predefined-constant">null</span>; <span class="comment">// Invalid format</span>
        }

        <span class="predefined-type">String</span> setName = path.substring(<span class="integer">0</span>, dotIdx);
        <span class="predefined-type">String</span> attrName = path.substring(dotIdx + <span class="integer">1</span>);

        <span class="keyword">return</span> <span class="keyword">new</span> ParsedDynamicHeader(header, setName, attrName, explicitType);
    }

    <span class="comment">/**
     * Process dynamic attribute columns for a row.
     *
     * @param bean the target bean
     * @param rowData all column values
     * @param parsedHeaders map of column name to parsed header info
     * @param profile the import profile
     * @param context the import context
     * @return result with any errors
     */</span>
    <span class="directive">public</span> ProcessResult processDynamicAttributes(
            BaseModel bean,
            <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; rowData,
            <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, ParsedDynamicHeader&gt; parsedHeaders,
            ImportProfile profile,
            ImportContext context) {

        <span class="comment">// Check if bean has dynamicAttributeSets field</span>
        <span class="predefined-type">List</span>&lt;DynamicAttributeSet&gt; sets = getDynamicAttributeSets(bean);
        <span class="keyword">if</span> (sets == <span class="predefined-constant">null</span>) {
            <span class="keyword">return</span> ProcessResult.skip(<span class="string"><span class="delimiter">&quot;</span><span class="content">Bean does not support dynamic attributes</span><span class="delimiter">&quot;</span></span>);
        }

        <span class="comment">// Load definition if specified</span>
        DynamicAttributeSetDefinition definition = loadDefinition(profile, context);

        <span class="comment">// Group columns by set name</span>
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">List</span>&lt;AttributeValue&gt;&gt; bySet = <span class="keyword">new</span> <span class="predefined-type">LinkedHashMap</span>&lt;&gt;();

        <span class="keyword">for</span> (<span class="predefined-type">Map</span>.Entry&lt;<span class="predefined-type">String</span>, ParsedDynamicHeader&gt; entry : parsedHeaders.entrySet()) {
            <span class="predefined-type">Object</span> value = rowData.get(entry.getKey());
            <span class="keyword">if</span> (value == <span class="predefined-constant">null</span> || value.toString().trim().isEmpty()) {
                <span class="keyword">continue</span>; <span class="comment">// Skip empty values</span>
            }

            ParsedDynamicHeader parsed = entry.getValue();
            DynamicAttributeType type = determineType(parsed, value, definition);
            <span class="predefined-type">Object</span> typedValue = convertValue(value.toString(), type, profile);

            bySet.computeIfAbsent(parsed.getSetName(), k -&gt; <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;())
                    .add(<span class="keyword">new</span> AttributeValue(parsed.getAttrName(), type, typedValue));
        }

        <span class="comment">// Apply merge strategy</span>
        applyMergeStrategy(sets, bySet, profile.getDynamicAttributeMergeStrategy());

        <span class="comment">// Validate against definition if present</span>
        <span class="keyword">if</span> (definition != <span class="predefined-constant">null</span>) {
            <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; errors = validateAgainstDefinition(sets, definition);
            <span class="keyword">if</span> (!errors.isEmpty()) {
                <span class="keyword">return</span> ProcessResult.error(<span class="predefined-type">String</span>.join(<span class="string"><span class="delimiter">&quot;</span><span class="content">; </span><span class="delimiter">&quot;</span></span>, errors));
            }
        }

        <span class="keyword">return</span> ProcessResult.success();
    }

    <span class="comment">// ... helper methods ...</span>
}

<span class="annotation">@Data</span>
<span class="annotation">@AllArgsConstructor</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ParsedDynamicHeader</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> originalHeader;
    <span class="directive">private</span> <span class="predefined-type">String</span> setName;
    <span class="directive">private</span> <span class="predefined-type">String</span> attrName;
    <span class="directive">private</span> DynamicAttributeType explicitType;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_inference_logic">5.4. Type Inference Logic</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> DynamicAttributeType inferType(<span class="predefined-type">String</span> value) {
    <span class="keyword">if</span> (value == <span class="predefined-constant">null</span> || value.isEmpty()) {
        <span class="keyword">return</span> DynamicAttributeType.String;
    }

    <span class="comment">// Boolean</span>
    <span class="keyword">if</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>.equalsIgnoreCase(value) || <span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>.equalsIgnoreCase(value)) {
        <span class="keyword">return</span> DynamicAttributeType.Boolean;
    }

    <span class="comment">// Integer</span>
    <span class="keyword">try</span> {
        <span class="predefined-type">Integer</span>.parseInt(value);
        <span class="keyword">return</span> DynamicAttributeType.Integer;
    } <span class="keyword">catch</span> (<span class="exception">NumberFormatException</span> e) { }

    <span class="comment">// Long</span>
    <span class="keyword">try</span> {
        <span class="predefined-type">Long</span>.parseLong(value);
        <span class="keyword">return</span> DynamicAttributeType.Long;
    } <span class="keyword">catch</span> (<span class="exception">NumberFormatException</span> e) { }

    <span class="comment">// Double</span>
    <span class="keyword">try</span> {
        <span class="predefined-type">Double</span>.parseDouble(value);
        <span class="keyword">return</span> DynamicAttributeType.Double;
    } <span class="keyword">catch</span> (<span class="exception">NumberFormatException</span> e) { }

    <span class="comment">// Date (common formats)</span>
    <span class="keyword">if</span> (isDateFormat(value)) {
        <span class="keyword">return</span> DynamicAttributeType.Date;
    }

    <span class="comment">// DateTime</span>
    <span class="keyword">if</span> (isDateTimeFormat(value)) {
        <span class="keyword">return</span> DynamicAttributeType.DateTime;
    }

    <span class="comment">// Default to String</span>
    <span class="keyword">return</span> DynamicAttributeType.String;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_merge_strategy_implementation">5.5. Merge Strategy Implementation</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> applyMergeStrategy(
        <span class="predefined-type">List</span>&lt;DynamicAttributeSet&gt; existingSets,
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">List</span>&lt;AttributeValue&gt;&gt; importedBySet,
        DynamicAttributeMergeStrategy strategy) {

    <span class="keyword">switch</span> (strategy) {
        <span class="keyword">case</span> REPLACE:
            existingSets.clear();
            <span class="comment">// Fall through to add all imported</span>
        <span class="keyword">case</span> MERGE:
        <span class="keyword">case</span> APPEND:
            <span class="keyword">for</span> (<span class="predefined-type">Map</span>.Entry&lt;<span class="predefined-type">String</span>, <span class="predefined-type">List</span>&lt;AttributeValue&gt;&gt; entry : importedBySet.entrySet()) {
                <span class="predefined-type">String</span> setName = entry.getKey();
                <span class="predefined-type">List</span>&lt;AttributeValue&gt; importedAttrs = entry.getValue();

                DynamicAttributeSet existingSet = findSetByName(existingSets, setName);
                <span class="keyword">if</span> (existingSet == <span class="predefined-constant">null</span>) {
                    <span class="comment">// Create new set</span>
                    existingSet = <span class="keyword">new</span> DynamicAttributeSet();
                    existingSet.setName(setName);
                    existingSet.setAttributes(<span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;());
                    existingSets.add(existingSet);
                }

                <span class="keyword">for</span> (AttributeValue av : importedAttrs) {
                    DynamicAttribute existing = findAttrByName(existingSet.getAttributes(), av.name);

                    <span class="keyword">if</span> (existing == <span class="predefined-constant">null</span>) {
                        <span class="comment">// Add new attribute</span>
                        DynamicAttribute attr = <span class="keyword">new</span> DynamicAttribute();
                        attr.setId(<span class="predefined-type">UUID</span>.randomUUID().toString());
                        attr.setName(av.name);
                        attr.setType(av.type);
                        attr.setValue(av.value);
                        existingSet.getAttributes().add(attr);
                    } <span class="keyword">else</span> <span class="keyword">if</span> (strategy == DynamicAttributeMergeStrategy.MERGE) {
                        <span class="comment">// Update existing</span>
                        existing.setType(av.type);
                        existing.setValue(av.value);
                    }
                    <span class="comment">// APPEND: skip if exists</span>
                }
            }
            <span class="keyword">break</span>;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_csv_examples">6. CSV Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dot_notation_strategy_examples">6.1. DOT_NOTATION Strategy Examples</h3>
<div class="sect3">
<h4 id="_example_1_simple_dynamic_attributes">6.1.1. Example 1: Simple Dynamic Attributes</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,dyn.specs.color,dyn.specs.size,dyn.specs.weight:Double
prod-001,Red Widget,Red,Large,2.5
prod-002,Blue Gadget,Blue,Medium,1.8</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_2_multiple_attribute_sets">6.1.2. Example 2: Multiple Attribute Sets</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">sku,name,dyn.logistics.weight:Double,dyn.logistics.hazmat:Boolean,dyn.compliance.ce_mark:Boolean,dyn.compliance.rohs:Boolean
WGT-001,Widget Pro,2.5,false,true,true
GDG-002,Gadget X,1.2,false,true,false</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_3_with_type_suffix">6.1.3. Example 3: With Type Suffix</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,dyn.dates.manufactured:Date,dyn.dates.expires:Date,dyn.counts.inventory:Integer
item-001,2024-01-15,2025-01-15,500
item-002,2024-02-20,2025-02-20,250</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_4_sparse_attributes_optional">6.1.4. Example 4: Sparse Attributes (Optional)</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,dyn.optional.note,dyn.optional.priority:Integer,dyn.optional.reviewed:Boolean
item-001,Important item,1,true
item-002,,,
item-003,Standard item,,false</code></pre>
</div>
</div>
<div class="paragraph">
<p>In row 2, <code>note</code>, <code>priority</code>, and <code>reviewed</code> are all empty - these attributes won&#8217;t be created.
In row 3, only <code>note</code> and <code>reviewed</code> are set.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_column_strategy_examples">6.2. JSON_COLUMN Strategy Examples</h3>
<div class="sect3">
<h4 id="_example_5_compact_json_format">6.2.1. Example 5: Compact JSON Format</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,dynamicAttributes
prod-001,Red Widget,&quot;{&quot;&quot;specs&quot;&quot;:{&quot;&quot;color&quot;&quot;:&quot;&quot;Red&quot;&quot;,&quot;&quot;size&quot;&quot;:&quot;&quot;Large&quot;&quot;,&quot;&quot;weight&quot;&quot;:2.5}}&quot;
prod-002,Blue Gadget,&quot;{&quot;&quot;specs&quot;&quot;:{&quot;&quot;color&quot;&quot;:&quot;&quot;Blue&quot;&quot;,&quot;&quot;size&quot;&quot;:&quot;&quot;Medium&quot;&quot;},&quot;&quot;compliance&quot;&quot;:{&quot;&quot;ce_mark&quot;&quot;:true}}&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_6_relaxed_json_single_quotes">6.2.2. Example 6: Relaxed JSON (Single Quotes)</h4>
<div class="paragraph">
<p>With <code>relaxedParsing: true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,dynamicAttributes
prod-001,Red Widget,&quot;{'specs':{'color':'Red','weight':2.5}}&quot;
prod-002,Blue Gadget,&quot;{'specs':{'color':'Blue'},'compliance':{'rohs':true}}&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_7_full_structure_json">6.2.3. Example 7: Full Structure JSON</h4>
<div class="paragraph">
<p>With <code>formatStyle: FULL</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,dynamicAttributeSets
prod-001,Red Widget,&quot;[{&quot;&quot;name&quot;&quot;:&quot;&quot;specs&quot;&quot;,&quot;&quot;attributes&quot;&quot;:[{&quot;&quot;name&quot;&quot;:&quot;&quot;color&quot;&quot;,&quot;&quot;type&quot;&quot;:&quot;&quot;String&quot;&quot;,&quot;&quot;value&quot;&quot;:&quot;&quot;Red&quot;&quot;},{&quot;&quot;name&quot;&quot;:&quot;&quot;weight&quot;&quot;,&quot;&quot;type&quot;&quot;:&quot;&quot;Double&quot;&quot;,&quot;&quot;value&quot;&quot;:2.5}]}]&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_8_custom_column_name">6.2.4. Example 8: Custom Column Name</h4>
<div class="paragraph">
<p>With <code>jsonColumnConfig.columnName: "customAttrs"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,customAttrs
prod-001,Red Widget,&quot;{&quot;&quot;specs&quot;&quot;:{&quot;&quot;color&quot;&quot;:&quot;&quot;Red&quot;&quot;}}&quot;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vertical_strategy_examples">6.3. VERTICAL Strategy Examples</h3>
<div class="sect3">
<h4 id="_example_9_basic_vertical_format">6.3.1. Example 9: Basic Vertical Format</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">_entityKey,_attrSet,_attrName,_attrType,_attrValue
WGT-001,logistics,weight,Double,2.5
WGT-001,logistics,dimensions,String,10x5x3
WGT-001,logistics,hazmat,Boolean,false
WGT-001,compliance,ce_mark,Boolean,true
WGT-001,compliance,certification_date,Date,2024-01-15
GDG-002,logistics,weight,Double,1.2
GDG-002,logistics,dimensions,String,5x5x2
GDG-002,compliance,ce_mark,Boolean,true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_10_vertical_with_entity_fields">6.3.2. Example 10: Vertical with Entity Fields</h4>
<div class="paragraph">
<p>With <code>allowEntityFieldsOnRows: true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">sku,name,_attrSet,_attrName,_attrValue
WGT-001,Widget Pro,logistics,weight,2.5
WGT-001,Widget Pro,logistics,dimensions,10x5x3
WGT-001,Widget Pro,compliance,ce_mark,true
GDG-002,Gadget X,logistics,weight,1.2
GDG-002,Gadget X,compliance,ce_mark,true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_example_11_vertical_with_type_inference">6.3.3. Example 11: Vertical with Type Inference</h4>
<div class="paragraph">
<p>Type column is optional when <code>_attrType</code> is omitted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">_entityKey,_attrSet,_attrName,_attrValue
WGT-001,specs,color,Red
WGT-001,specs,weight,2.5
WGT-001,specs,active,true
WGT-001,specs,count,42</code></pre>
</div>
</div>
<div class="paragraph">
<p>Types inferred: color=String, weight=Double, active=Boolean, count=Integer</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_12_custom_column_names">6.3.4. Example 12: Custom Column Names</h4>
<div class="paragraph">
<p>With custom <code>verticalFormatConfig</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">product_sku,set_name,attribute,type,value
WGT-001,logistics,weight,Double,2.5
WGT-001,logistics,hazmat,Boolean,false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hybrid_strategy_examples">6.4. HYBRID Strategy Examples</h3>
<div class="sect3">
<h4 id="_example_13_combined_dot_notation_json">6.4.1. Example 13: Combined DOT_NOTATION + JSON</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,displayName,dyn.specs.color,dyn.specs.size,dynamicAttributes
prod-001,Red Widget,Red,Large,&quot;{&quot;&quot;compliance&quot;&quot;:{&quot;&quot;ce_mark&quot;&quot;:true,&quot;&quot;rohs&quot;&quot;:true}}&quot;
prod-002,Blue Gadget,Blue,Medium,&quot;{&quot;&quot;compliance&quot;&quot;:{&quot;&quot;ce_mark&quot;&quot;:true}}&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result: <code>specs</code> set from DOT_NOTATION columns, <code>compliance</code> set from JSON.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_14_hybrid_with_override">6.4.2. Example 14: Hybrid with Override</h4>
<div class="paragraph">
<p>JSON values override DOT_NOTATION for same attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">refName,dyn.specs.color,dynamicAttributes
prod-001,Red,&quot;{&quot;&quot;specs&quot;&quot;:{&quot;&quot;color&quot;&quot;:&quot;&quot;Dark Red&quot;&quot;,&quot;&quot;size&quot;&quot;:&quot;&quot;XL&quot;&quot;}}&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result: <code>color</code> = "Dark Red" (JSON wins), <code>size</code> = "XL" (from JSON only)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_importprofile_configuration_examples">7. ImportProfile Configuration Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dot_notation_auto_discovery_mode">7.1. DOT_NOTATION: Auto-Discovery Mode</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-import-dot-notation</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with Dot Notation</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DOT_NOTATION</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enableDynamicAttributeDiscovery</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributePrefix</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dyn.</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dot_notation_explicit_mapping_mode">7.2. DOT_NOTATION: Explicit Mapping Mode</h3>
<div class="paragraph">
<p>Map arbitrary column names to dynamic attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-import-explicit-mapping</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with Explicit Mappings</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DOT_NOTATION</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enableDynamicAttributeDiscovery</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMappings</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">weight_kg</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetSetName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">logistics</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetAttributeName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Double</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">is_hazmat</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetSetName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">logistics</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetAttributeName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">hazmat</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Boolean</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ce_certified</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetSetName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">compliance</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetAttributeName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ce_mark</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Boolean</span><span class="delimiter">&quot;</span></span>
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REPLACE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_column_compact_format">7.3. JSON_COLUMN: Compact Format</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-import-json-compact</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with JSON Column</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">JSON_COLUMN</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">jsonColumnConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">columnName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dynamicAttributes</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">formatStyle</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">COMPACT</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">relaxedParsing</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_column_full_structure_format">7.4. JSON_COLUMN: Full Structure Format</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-import-json-full</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with Full JSON Structure</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">JSON_COLUMN</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">jsonColumnConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">columnName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeSets</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">formatStyle</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">FULL</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">relaxedParsing</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">REPLACE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vertical_basic_configuration">7.5. VERTICAL: Basic Configuration</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-attributes-vertical</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Attributes Vertical Import</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">VERTICAL</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">verticalFormatConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">entityKeyColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">_entityKey</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">entityKeyField</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sku</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">setNameColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrSet</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrNameColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrName</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrTypeColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrType</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrValueColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">_attrValue</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">allowEntityFieldsOnRows</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vertical_with_entity_fields_on_rows">7.6. VERTICAL: With Entity Fields on Rows</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-vertical-with-fields</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Vertical with Entity Fields</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">VERTICAL</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">verticalFormatConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">entityKeyColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sku</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">entityKeyField</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sku</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">setNameColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_set</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrNameColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_name</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrTypeColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_type</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">attrValueColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_value</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">allowEntityFieldsOnRows</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">excludeFromEntityFields</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">attr_set</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">attr_value</span><span class="delimiter">&quot;</span></span>]
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">APPEND</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hybrid_combined_strategy">7.7. HYBRID: Combined Strategy</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-import-hybrid</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with Hybrid Strategy</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">HYBRID</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributePrefix</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dyn.</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enableDynamicAttributeDiscovery</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">jsonColumnConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">columnName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">extraAttributes</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">formatStyle</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">COMPACT</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">relaxedParsing</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_with_definition_validation">7.8. With Definition Validation</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">validated-product-import</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product Import with Strict Validation</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DOT_NOTATION</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enableDynamicAttributeDiscovery</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributePrefix</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dyn.</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeDefinitionRefName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-attributes-definition</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">strictDynamicAttributeValidation</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_complete_example_with_all_options">7.9. Complete Example with All Options</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">full-product-import-profile</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Complete Product Import Profile</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Demonstrates all dynamic attribute options</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Product</span><span class="delimiter">&quot;</span></span>,

  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">HYBRID</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMergeStrategy</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MERGE</span><span class="delimiter">&quot;</span></span>,

  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributePrefix</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dyn.</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enableDynamicAttributeDiscovery</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,

  <span class="key"><span class="delimiter">&quot;</span><span class="content">jsonColumnConfig</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">columnName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">jsonAttrs</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">formatStyle</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">COMPACT</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">relaxedParsing</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
  },

  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeMappings</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">weight_lbs</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetSetName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">logistics</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetAttributeName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">weight_pounds</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Double</span><span class="delimiter">&quot;</span></span>
    }
  ],

  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeDefinitionRefName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product-attrs-def</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">strictDynamicAttributeValidation</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">defaultDynamicAttributeType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeDateFormat</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MM/dd/yyyy</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dynamicAttributeDateTimeFormat</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MM/dd/yyyy HH:mm</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_processing_order_integration">8. Processing Order Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The dynamic attribute processing integrates into the existing CSV import pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>1. CSV parsing with CellProcessors
2. Field calculators (timestamps, UUIDs, templates)
3. RowValueResolvers (arbitrary code with full row access)
4. DynamicAttributeProcessor (dynamic attribute import)
5. Pre-validation transformers
6. Bean validation</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rowvalueresolver_arc_cdi_bean_integration">9. RowValueResolver: Arc CDI Bean Integration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">9.1. Overview</h3>
<div class="paragraph">
<p>The <code>RowValueResolver</code> SPI provides a powerful mechanism for running arbitrary code during CSV import.
Unlike static lookups or simple transformations, RowValueResolvers have access to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The entire row data (all columns)</p>
</li>
<li>
<p>Full CDI injection capabilities (services, repositories, etc.)</p>
</li>
<li>
<p>The import context (profile, realm, row number, session)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Key Feature</strong>: Since RowValueResolvers are Arc CDI beans, you can inject any other service
and update multiple collections from a single CSV row.</p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_implementation">9.2. Basic Implementation</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SkuResolver</span> <span class="directive">implements</span> RowValueResolver {

    <span class="annotation">@Inject</span>
    ProductService productService;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">skuResolver</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">ResolveResult</span> resolve(<span class="predefined-type">String</span> inputValue, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; rowData, ImportContext context) {
        <span class="predefined-type">String</span> category = (<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">String</span> vendor = (<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">vendor</span><span class="delimiter">&quot;</span></span>);

        <span class="predefined-type">String</span> resolvedSku = productService.findOrCreateSku(inputValue, category, vendor);

        <span class="keyword">if</span> (resolvedSku != <span class="predefined-constant">null</span>) {
            <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.success(resolvedSku);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Could not resolve SKU for: </span><span class="delimiter">&quot;</span></span> + inputValue);
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multi_collection_updates">9.3. Multi-Collection Updates</h3>
<div class="paragraph">
<p>Since RowValueResolvers are Arc beans, you can inject multiple repositories and update
multiple collections from a single CSV row:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">OrderLineResolver</span> <span class="directive">implements</span> RowValueResolver {

    <span class="annotation">@Inject</span>
    OrderRepo orderRepo;

    <span class="annotation">@Inject</span>
    InventoryRepo inventoryRepo;

    <span class="annotation">@Inject</span>
    AuditLogRepo auditLogRepo;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">orderLineResolver</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">ResolveResult</span> resolve(<span class="predefined-type">String</span> inputValue, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; rowData, ImportContext context) {
        <span class="predefined-type">String</span> orderId = (<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">order_id</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">String</span> productSku = (<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">product_sku</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">Integer</span> quantity = <span class="predefined-type">Integer</span>.parseInt((<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">quantity</span><span class="delimiter">&quot;</span></span>));

        <span class="comment">// Update inventory (different collection)</span>
        inventoryRepo.decrementStock(productSku, quantity, context.getRealmId());

        <span class="comment">// Create audit log entry (another collection)</span>
        AuditLog log = AuditLog.builder()
            .action(<span class="string"><span class="delimiter">&quot;</span><span class="content">IMPORT_ORDER_LINE</span><span class="delimiter">&quot;</span></span>)
            .entityRef(orderId)
            .details(<span class="string"><span class="delimiter">&quot;</span><span class="content">Imported line for SKU: </span><span class="delimiter">&quot;</span></span> + productSku)
            .build();
        auditLogRepo.save(log);

        <span class="comment">// Return the value for the main entity being imported</span>
        <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.success(productSku);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_available_injections">9.4. Available Injections</h3>
<div class="paragraph">
<p>RowValueResolvers can inject any Arc/CDI bean:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Injection Type</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repositories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Inject ProductRepo productRepo;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Inject EmailService emailService;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@ConfigProperty(name="app.import.threshold") int threshold;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Other Resolvers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Inject Instance&lt;RowValueResolver&gt; allResolvers;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MicroProfile Clients</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@Inject @RestClient ExternalApiClient client;</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_configuration_in_importprofile_2">9.5. Configuration in ImportProfile</h3>
<div class="paragraph">
<p>Configure a RowValueResolver in your ColumnMapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">refName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">order-import-profile</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">targetCollection</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.example.Order</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">columnMappings</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">product_code</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetField</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">sku</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">rowValueResolverName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">skuResolver</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">sourceColumn</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">line_data</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">targetField</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">lineInfo</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">rowValueResolverName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">orderLineResolver</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_result_types">9.6. Result Types</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Result</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.success(value)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the field to the resolved value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.passthrough(original)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keep the original value unchanged</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.nullValue()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the field to null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.skip()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip this row (no error, just don&#8217;t process)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.skip(reason)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip with a reason (logged but not an error)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ResolveResult.error(message)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark the row as an error</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_importcontext_information">9.7. ImportContext Information</h3>
<div class="paragraph">
<p>The <code>ImportContext</code> provides access to:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getProfile()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ImportProfile configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getTargetClass()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The class being imported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getRealmId()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The realm/tenant ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getRowNumber()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current row number (1-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getSessionId()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The import session ID</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_advanced_conditional_processing">9.8. Advanced: Conditional Processing</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ConditionalResolver</span> <span class="directive">implements</span> RowValueResolver {

    <span class="annotation">@Inject</span>
    ConfigService configService;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> getName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">conditionalResolver</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> appliesTo(<span class="predefined-type">Class</span>&lt;?&gt; targetClass) {
        <span class="comment">// Only apply to Order entities</span>
        <span class="keyword">return</span> Order.class.isAssignableFrom(targetClass);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">int</span> getOrder() {
        <span class="comment">// Run before other resolvers (lower = earlier)</span>
        <span class="keyword">return</span> <span class="integer">50</span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">ResolveResult</span> resolve(<span class="predefined-type">String</span> inputValue, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; rowData, ImportContext context) {
        <span class="comment">// Check configuration</span>
        <span class="keyword">if</span> (!configService.isFeatureEnabled(<span class="string"><span class="delimiter">&quot;</span><span class="content">advanced-import</span><span class="delimiter">&quot;</span></span>, context.getRealmId())) {
            <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.passthrough(inputValue);
        }

        <span class="comment">// Skip certain rows based on data</span>
        <span class="predefined-type">String</span> status = (<span class="predefined-type">String</span>) rowData.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">if</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">CANCELLED</span><span class="delimiter">&quot;</span></span>.equals(status)) {
            <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.skip(<span class="string"><span class="delimiter">&quot;</span><span class="content">Skipping cancelled orders</span><span class="delimiter">&quot;</span></span>);
        }

        <span class="comment">// Process normally</span>
        <span class="keyword">return</span> <span class="predefined-type">ResolveResult</span>.success(processValue(inputValue, rowData));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_rowvalueresolvers">9.9. Testing RowValueResolvers</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@QuarkusTest</span>
<span class="type">class</span> <span class="class">SkuResolverTest</span> {

    <span class="annotation">@Inject</span>
    SkuResolver resolver;

    <span class="annotation">@Test</span>
    <span class="type">void</span> testResolveSuccess() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; rowData = <span class="predefined-type">Map</span>.of(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">electronics</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">vendor</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">acme</span><span class="delimiter">&quot;</span></span>
        );
        ImportContext context = ImportContext.builder()
            .realmId(<span class="string"><span class="delimiter">&quot;</span><span class="content">test-realm</span><span class="delimiter">&quot;</span></span>)
            .rowNumber(<span class="integer">1</span>)
            .build();

        RowValueResolver.ResolveResult result = resolver.resolve(<span class="string"><span class="delimiter">&quot;</span><span class="content">PROD-001</span><span class="delimiter">&quot;</span></span>, rowData, context);

        assertTrue(result.isSuccess());
        assertNotNull(result.getValue());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_edge_cases_and_error_handling">10. Edge Cases and Error Handling</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_emptynull_values">10.1. Empty/Null Values</h3>
<div class="ulist">
<ul>
<li>
<p>Empty string → attribute not created (sparse support)</p>
</li>
<li>
<p>Explicit null marker (configurable, e.g., "NULL") → attribute created with null value</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_type_mismatches">10.2. Type Mismatches</h3>
<div class="ulist">
<ul>
<li>
<p>If type is explicit or from definition, conversion failure → error</p>
</li>
<li>
<p>If type is inferred, use String as fallback</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_invalid_header_format">10.3. Invalid Header Format</h3>
<div class="ulist">
<ul>
<li>
<p><code>dyn.</code> with no dot after set name → warning, skip column</p>
</li>
<li>
<p><code>dyn.setname</code> with no attribute name → warning, skip column</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_missing_required_attributes">10.4. Missing Required Attributes</h3>
<div class="ulist">
<ul>
<li>
<p>If DynamicAttributeSetDefinition specifies <code>required=true</code>, validate presence</p>
</li>
<li>
<p>Report all missing required attributes as validation errors</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unknown_setsattributes">10.5. Unknown Sets/Attributes</h3>
<div class="ulist">
<ul>
<li>
<p>By default, allow any set/attribute names (schema-less)</p>
</li>
<li>
<p>If <code>strictMode=true</code> in profile, only allow defined sets/attributes</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_components">11. Implementation Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_model_classes">11.1. New Model Classes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeImportStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum: NONE, DOT_NOTATION, JSON_COLUMN, VERTICAL, HYBRID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeMergeStrategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum: REPLACE, MERGE, APPEND</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration for mapping CSV columns to dynamic attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonColumnConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration for JSON_COLUMN strategy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonFormatStyle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum: COMPACT, FULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VerticalFormatConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration for VERTICAL strategy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParsedDynamicHeader</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parsed dynamic attribute header info for DOT_NOTATION</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_new_service_classes">11.2. New Service Classes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeImportService</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Main orchestrator for dynamic attribute processing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DotNotationProcessor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes DOT_NOTATION strategy columns</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JsonColumnProcessor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes JSON_COLUMN strategy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VerticalFormatProcessor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processes VERTICAL strategy with row grouping</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeTypeInferrer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type inference from string values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeMerger</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Applies merge strategies (REPLACE, MERGE, APPEND)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DynamicAttributeValidator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates against DynamicAttributeSetDefinition</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_enhanced_existing_classes">11.3. Enhanced Existing Classes</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ImportProfile</code> (enhanced)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.model.persistent.imports</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New fields for dynamic attribute configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ImportProfileService</code> (enhanced)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.imports.service</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integration with DynamicAttributeImportService</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CSVImportHelper</code> (enhanced)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.e2eq.framework.util</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strategy detection and processor routing</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_future_considerations">12. Future Considerations</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Nested Attributes</strong>: Support for nested objects within attribute values (e.g., <code>dyn.address.coordinates.lat</code>)</p>
</li>
<li>
<p><strong>Multi-Value Attributes</strong>: Support for MultiSelect with comma-separated values or JSON arrays</p>
</li>
<li>
<p><strong>Inheritance</strong>: Respect <code>inheritable</code> flag when merging with parent entities</p>
</li>
<li>
<p><strong>Export Symmetry</strong>: Ensure CSV export uses same conventions for round-trip imports</p>
</li>
<li>
<p><strong>Bulk Operations</strong>: Streaming processor for VERTICAL strategy with very large files</p>
</li>
<li>
<p><strong>Mixed Entity Types</strong>: VERTICAL format with multiple entity types in same file</p>
</li>
<li>
<p><strong>Attribute Templates</strong>: Pre-defined attribute set templates for common patterns</p>
</li>
<li>
<p><strong>Change Detection</strong>: Only update attributes that actually changed</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">13. Summary</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dynamic_attribute_import_strategies">13.1. Dynamic Attribute Import Strategies</h3>
<div class="paragraph">
<p>The design supports <strong>four import strategies</strong> for dynamic attributes, each suited to different use cases:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Strategy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DOT_NOTATION</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spreadsheet-friendly with <code>dyn.setName.attrName[:type]</code> column headers. Best for human-edited CSV files with known attribute structures.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JSON_COLUMN</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single JSON column containing all attributes. Best for programmatic imports or complex/variable attribute structures.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VERTICAL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple rows per entity with one attribute per row. Best for attribute-centric workflows or bulk attribute loading.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HYBRID</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Combines DOT_NOTATION and JSON_COLUMN. Allows spreadsheet columns for common attributes with JSON for extras.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All strategies share common features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Merge Strategies</strong>: REPLACE, MERGE, APPEND for handling existing attributes</p>
</li>
<li>
<p><strong>Type Handling</strong>: Explicit types, definition lookup, or inference</p>
</li>
<li>
<p><strong>Validation</strong>: Optional validation against DynamicAttributeSetDefinition</p>
</li>
<li>
<p><strong>Sparse Support</strong>: Missing/empty values handled gracefully</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rowvalueresolver_extensible_import_logic">13.2. RowValueResolver: Extensible Import Logic</h3>
<div class="paragraph">
<p>The <code>RowValueResolver</code> SPI enables powerful, custom import logic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Arc CDI Beans</strong>: Full dependency injection support</p>
</li>
<li>
<p><strong>Multi-Collection Updates</strong>: Update multiple collections from a single row</p>
</li>
<li>
<p><strong>Full Row Access</strong>: Read any column value, not just the mapped column</p>
</li>
<li>
<p><strong>Context Awareness</strong>: Access to realm, session, row number, and profile</p>
</li>
<li>
<p><strong>Flexible Results</strong>: Return values, skip rows, or report errors</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_summary">13.3. Implementation Summary</h3>
<div class="paragraph">
<p>The implementation includes:</p>
</div>
<div class="sect3">
<h4 id="_model_classes_quantum_models">13.3.1. Model Classes (quantum-models)</h4>
<div class="ulist">
<ul>
<li>
<p><code>DynamicAttributeImportStrategy</code> - NONE, DOT_NOTATION, JSON_COLUMN, VERTICAL, HYBRID</p>
</li>
<li>
<p><code>DynamicAttributeMergeStrategy</code> - REPLACE, MERGE, APPEND</p>
</li>
<li>
<p><code>JsonColumnConfig</code> - Configuration for JSON_COLUMN strategy</p>
</li>
<li>
<p><code>VerticalFormatConfig</code> - Configuration for VERTICAL strategy</p>
</li>
<li>
<p><code>DynamicAttributeMapping</code> - Explicit column-to-attribute mappings</p>
</li>
<li>
<p><code>ParsedDynamicHeader</code> - Parsed header info for DOT_NOTATION</p>
</li>
<li>
<p><code>DynamicAttributeSupport</code> - Interface for models supporting dynamic attributes</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_service_classes_quantum_framework">13.3.2. Service Classes (quantum-framework)</h4>
<div class="ulist">
<ul>
<li>
<p><code>DynamicAttributeImportService</code> - Main orchestrator</p>
</li>
<li>
<p><code>DotNotationProcessor</code> - DOT_NOTATION strategy processor</p>
</li>
<li>
<p><code>JsonColumnProcessor</code> - JSON_COLUMN strategy processor</p>
</li>
<li>
<p><code>VerticalFormatProcessor</code> - VERTICAL strategy processor</p>
</li>
<li>
<p><code>DynamicAttributeTypeInferrer</code> - Type inference from string values</p>
</li>
<li>
<p><code>DynamicAttributeMerger</code> - Merge strategy implementation</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_integration_points">13.3.3. Integration Points</h4>
<div class="ulist">
<ul>
<li>
<p><code>ImportProfile</code> - Extended with dynamic attribute configuration</p>
</li>
<li>
<p><code>CSVImportHelper</code> - Integrated for automatic processing</p>
</li>
<li>
<p><code>RowValueResolver</code> - Arc CDI bean SPI for custom logic</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2.4-SNAPSHOT<br>
Last updated 2026-01-26 15:52:04 -0500
</div>
</div>
</body>
</html>