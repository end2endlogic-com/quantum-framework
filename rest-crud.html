<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>REST: Find, Get, List, Save, Update, Delete</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#rest-crud">1. REST: Find, Get, List, Save, Update, Delete</a>
<ul class="sectlevel2">
<li><a href="#_base_concepts">1.1. Base Concepts</a></li>
<li><a href="#_example_resource">1.2. Example Resource</a></li>
<li><a href="#_authorization_layers_in_rest_crud">1.3. Authorization Layers in REST CRUD</a></li>
<li><a href="#querying">1.4. Querying</a></li>
<li><a href="#_responses_and_schemas">1.5. Responses and Schemas</a></li>
<li><a href="#_error_handling">1.6. Error Handling</a>
<ul class="sectlevel3">
<li><a href="#_query_language_antlrbased">1.6.1. Query Language (ANTLR‑based)</a></li>
</ul>
</li>
<li><a href="#_simple_filters_equals">1.7. Simple filters (equals)</a></li>
<li><a href="#_advanced_filters_grouping_and_andornot">1.8. Advanced filters: grouping and AND/OR/NOT</a></li>
<li><a href="#_in_lists">1.9. IN lists</a></li>
<li><a href="#_sorting">1.10. Sorting</a></li>
<li><a href="#_projections">1.11. Projections</a></li>
<li><a href="#_endtoend_examples">1.12. End‑to‑end examples</a></li>
</ul>
</li>
<li><a href="#_csv_export_and_import">2. CSV Export and Import</a>
<ul class="sectlevel2">
<li><a href="#_export_get_csv">2.1. Export: GET /csv</a></li>
<li><a href="#_import_post_csv_multipart">2.2. Import: POST /csv (multipart)</a></li>
<li><a href="#_import_with_preview_sessions">2.3. Import with preview sessions</a></li>
</ul>
</li>
<li><a href="#rest-crud-auth">Authentication and Authorization</a>
<ul class="sectlevel1">
<li><a href="#_jwt_provider">3. JWT Provider</a></li>
<li><a href="#_pluggable_authentication">4. Pluggable Authentication</a></li>
<li><a href="#_creating_an_auth_plugin_using_the_custom_jwt_provider_as_a_reference">5. Creating an Auth Plugin (using the Custom JWT provider as a reference)</a></li>
<li><a href="#_authprovider_interface_what_a_provider_must_implement">6. AuthProvider interface (what a provider must implement)</a></li>
<li><a href="#_usermanagement_interface_operations_your_plugin_must_support">7. UserManagement interface (operations your plugin must support)</a></li>
<li><a href="#_leveraging_baseauthprovider_in_your_plugin">8. Leveraging BaseAuthProvider in your plugin</a></li>
<li><a href="#_implementing_your_own_provider">9. Implementing your own provider</a></li>
<li><a href="#_credentialuseridpassword_model_and_domaincontext">10. CredentialUserIdPassword model and DomainContext</a></li>
<li><a href="#_quarkus_oidc_out_of_the_box_and_integrating_with_common_idps">11. Quarkus OIDC out-of-the-box and integrating with common IdPs</a></li>
<li><a href="#_authorization_via_rulecontext">12. Authorization via RuleContext</a>
<ul class="sectlevel2">
<li><a href="#ontology-rest-crud">12.1. Using Ontology Edges in List Endpoints (optional)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="rest-crud">1. REST: Find, Get, List, Save, Update, Delete</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quantum provides consistent REST resources backed by repositories. Extend BaseResource to expose CRUD quickly and consistently.</p>
</div>
<div class="sect2">
<h3 id="_base_concepts">1.1. Base Concepts</h3>
<div class="ulist">
<ul>
<li>
<p>BaseResource&lt;T, R extends Repo&lt;T&gt;&gt; provides endpoints for:</p>
</li>
<li>
<p>find: query by criteria (filters, pagination)</p>
</li>
<li>
<p>get: fetch by id or refName</p>
</li>
<li>
<p>list: list all within scope with paging</p>
</li>
<li>
<p>save: create</p>
</li>
<li>
<p>update: modify existing</p>
</li>
<li>
<p>delete: delete or soft-delete/archival depending on model</p>
</li>
<li>
<p>UIActionList: derive available actions based on current model state.</p>
</li>
<li>
<p>DataDomain filtering is applied across all operations to enforce multi-tenancy.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_resource">1.2. Example Resource</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">com.e2eq.framework.rest.resources.BaseResource</span>;
<span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;

<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProductResource</span> <span class="directive">extends</span> BaseResource&lt;Product, ProductRepo&gt; {
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authorization_layers_in_rest_crud">1.3. Authorization Layers in REST CRUD</h3>
<div class="paragraph">
<p>Quantum combines static, identity-based checks with dynamic, domain-aware policy evaluation. In practice you will often use both:</p>
</div>
<div class="paragraph">
<p>1) Hard-coded permissions via annotations</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use standard Jakarta annotations like @RolesAllowed (or the framework’s @RoleAllow if present) on resource classes or methods to declare role-based checks that must pass before executing an endpoint.</p>
</li>
<li>
<p>These checks are fast and decisive. They rely on the caller’s roles as established by the current SecurityIdentity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">jakarta.annotation.security.RolesAllowed</span>;

<span class="annotation">@RolesAllowed</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">ADMIN</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">CATALOG_EDITOR</span><span class="delimiter">&quot;</span></span>})
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ProductResource</span> <span class="directive">extends</span> BaseResource&lt;Product, ProductRepo&gt; {
    <span class="comment">// Only ADMIN or CATALOG_EDITOR can access all inherited CRUD endpoints</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) JWT groups and role mapping</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When using the JWT provider, the token’s groups/roles claims are mapped into the Quarkus SecurityIdentity (see the Authentication guide).</p>
</li>
<li>
<p>Groups in JWT typically become roles on SecurityIdentity; these roles are what @RolesAllowed/@RoleAllow checks evaluate.</p>
</li>
<li>
<p>You can augment or transform roles using a SecurityIdentityAugmentor (see RolesAugmentor in the framework) to add derived roles based on claims or external lookups.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>3) RuleContext layered authorization (dynamic policies)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>After annotation checks pass, RuleContext evaluates domain-aware permissions. This layer can:</p>
</li>
<li>
<p>Enforce DataDomain scoping (tenant/org/owner)</p>
</li>
<li>
<p>Allow cross-tenant reads for specific functional areas when policy permits</p>
</li>
<li>
<p>Contribute query predicates and projections to repositories</p>
</li>
<li>
<p>Think of @RolesAllowed/@RoleAllow as the coarse-grained gate, and RuleContext as the fine-grained, context-sensitive policy engine.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>4) Quarkus SecurityIdentity and SecurityFilter</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quarkus produces a SecurityIdentity for each request containing principal name and roles.</p>
</li>
<li>
<p>The framework’s SecurityFilter inspects the incoming request (e.g., JWT) and populates/augments the SecurityIdentity and the derived DomainContext used by RuleContext and repositories.</p>
</li>
<li>
<p>BaseResource and underlying repos (e.g., MorphiaRepo) consume SecurityIdentity/DomainContext to apply permissions and filters consistently.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For detailed rule-base matching (URL, headers, body predicates, priorities), see the Permissions section.</p>
</div>
</div>
<div class="sect2">
<h3 id="querying">1.4. Querying</h3>
<div class="ulist">
<ul>
<li>
<p>Use query parameters or a request body (depending on your API convention) to express filters.</p>
</li>
<li>
<p>RuleContext contributes tenant-aware filters and projections automatically.</p>
</li>
<li>
<p>See <a href="query-language.html#query-language">Query Language</a> for the full BIAPIQuery syntax, including array filtering with elemMatch and IN‑clause enhancements that accept resolver‑provided lists.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_responses_and_schemas">1.5. Responses and Schemas</h3>
<div class="ulist">
<ul>
<li>
<p>Models are returned with calculated fields (e.g., actionList) when appropriate.</p>
</li>
<li>
<p>OpenAPI annotations in your models/resources integrate with MicroProfile OpenAPI for schema docs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_error_handling">1.6. Error Handling</h3>
<div class="ulist">
<ul>
<li>
<p>Validation errors (e.g., ImportRequiredField, Size) return helpful messages.</p>
</li>
<li>
<p>Rule-based denials return appropriate HTTP statuses (403/404) without leaking cross-tenant metadata.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_query_language_antlrbased">1.6.1. Query Language (ANTLR‑based)</h4>
<div class="paragraph">
<p>The find/list endpoints accept a filter string parsed by an ANTLR grammar (BIAPIQuery.g4). Use the filter query parameter to express predicates; combine them with logical operators and grouping. Sorting and projection are separate query parameters.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Operators:</p>
</li>
<li>
<p>Equals: ':'</p>
</li>
<li>
<p>Not equals: ':!'</p>
</li>
<li>
<p>Less than/Greater than: ':&lt;' / ':&gt;'</p>
</li>
<li>
<p>Less‑than‑or‑equal/Greater‑than‑or‑equal: ':&#8656;' / ':&gt;='</p>
</li>
<li>
<p>Exists (field present): ':~' (no value)</p>
</li>
<li>
<p>In list: ':^' followed by [v1,v2,&#8230;&#8203;]</p>
</li>
<li>
<p>Boolean literals: true/false</p>
</li>
<li>
<p>Null literal: null</p>
</li>
<li>
<p>Logical:</p>
</li>
<li>
<p>AND: '&amp;&amp;'</p>
</li>
<li>
<p>OR: '||'</p>
</li>
<li>
<p>NOT: '!!' (applies to a single allowed expression)</p>
</li>
<li>
<p>Grouping: parentheses '(' and ')'</p>
</li>
<li>
<p>Values by type:</p>
</li>
<li>
<p>Strings: unquoted or quoted with "&#8230;&#8203;"; quotes allow spaces and punctuation</p>
</li>
<li>
<p>Whole numbers: prefix with '#' (e.g., #10)</p>
</li>
<li>
<p>Decimals: prefix with '<mark>' (e.g., </mark>19.99)</p>
</li>
<li>
<p>Date: yyyy-MM-dd (e.g., 2025-09-10)</p>
</li>
<li>
<p>DateTime (ISO‑8601): 2025-09-10T12:30:00Z (timezone supported)</p>
</li>
<li>
<p>ObjectId (Mongo 24‑hex): 5f1e9b9c8a0b0c0d1e2f3a4b</p>
</li>
<li>
<p>Reference by ObjectId: @@5f1e9b9c8a0b0c0d1e2f3a4b</p>
</li>
<li>
<p>Variables: ${ownerId|principalId|resourceId|action|functionalDomain|pTenantId|pAccountId|rTenantId|rAccountId|realm|area}</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simple_filters_equals">1.7. Simple filters (equals)</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># string equality
name:&quot;Acme Widget&quot;
# whole number
quantity:#10
# decimal number
price:##19.99
# date and datetime
shipDate:2025-09-12
updatedAt:2025-09-12T10:15:00Z
# boolean
active:true
# null checks
description:null
# field exists
lastLogin:~
# object id equality
id:5f1e9b9c8a0b0c0d1e2f3a4b
# variable usage (e.g., tenant scoping)
dataDomain.tenantId:${pTenantId}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_filters_grouping_and_andornot">1.8. Advanced filters: grouping and AND/OR/NOT</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Products that are active and (name contains widget OR gizmo), excluding discontinued
active:true &amp;&amp; (name:*widget* || name:*gizmo*) &amp;&amp; status:!&quot;DISCONTINUED&quot;

# Shipments updated after a date AND (destination NY OR CA)
updatedAt:&gt;=2025-09-01 &amp;&amp; (destination:&quot;NY&quot; || destination:&quot;CA&quot;)

# NOT example: items where category is not null and not (price &lt; 10)
category:!null &amp;&amp; !!(price:&lt;##10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notes:
- Wildcard matching uses '<strong>': name:*widget</strong> (prefix/suffix/contains). '?' matches a single character.
- Use parentheses to enforce precedence; otherwise AND/OR follow standard left‑to‑right with explicit operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="_in_lists">1.9. IN lists</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>status:^[&quot;OPEN&quot;,&quot;CLOSED&quot;,&quot;ON_HOLD&quot;]
ownerId:^[&quot;u1&quot;,&quot;u2&quot;,&quot;u3&quot;]
referenceId:^[@@5f1e9b9c8a0b0c0d1e2f3a4b, @@6a7b8c9d0e1f2a3b4c5d6e7f]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sorting">1.10. Sorting</h3>
<div class="paragraph">
<p>Provide a sort query parameter (comma‑separated fields):
- '-' prefix = descending, '+' or no prefix = ascending.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># single field descending
?sort=-createdAt

# multiple fields: createdAt desc, refName asc
?sort=-createdAt,refName</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_projections">1.11. Projections</h3>
<div class="paragraph">
<p>Limit returned fields with the projection parameter (comma‑separated):
- '+' prefix = include, '-' prefix = exclude.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># include only id and refName, exclude heavy fields
?projection=+id,+refName,-auditInfo,-persistentEvents</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_endtoend_examples">1.12. End‑to‑end examples</h3>
<div class="ulist">
<ul>
<li>
<p>GET /products/list?skip=0&amp;limit=50&amp;filter=active:true&amp;&amp;name:*widget*&amp;sort=-updatedAt&amp;projection=+id,+name,-auditInfo</p>
</li>
<li>
<p>GET /shipments/list?filter=(destination:"NY"||destination:"CA")&amp;&amp;updatedAt:&gt;=2025-09-01&amp;sort=origin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These features integrate with RuleContext and DataDomain: your filter runs within the tenant/org scope derived from the security context; RuleContext may add further predicates or projections automatically.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_csv_export_and_import">2. CSV Export and Import</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These endpoints are inherited by every resource that extends BaseResource. They are mounted under the resource’s base path. For example, PolicyResource at /security/permission/policies exposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GET /security/permission/policies/csv</p>
</li>
<li>
<p>POST /security/permission/policies/csv</p>
</li>
<li>
<p>POST /security/permission/policies/csv/session</p>
</li>
<li>
<p>POST /security/permission/policies/csv/session/{sessionId}/commit</p>
</li>
<li>
<p>DELETE /security/permission/policies/csv/session/{sessionId}</p>
</li>
<li>
<p>GET /security/permission/policies/csv/session/{sessionId}/rows</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Authorization and scoping:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All CSV endpoints are protected by the same @RolesAllowed("user", "admin") checks as other CRUD operations.</p>
</li>
<li>
<p>RuleContext filters and DataDomain scoping apply the same way as list/find; exports stream only what the caller may see, and imports are saved under the same permissions.</p>
</li>
<li>
<p>In multi‑realm deployments, include your X-Realm header as you do for CRUD; underlying repos resolve realm and domain context consistently.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_export_get_csv">2.1. Export: GET /csv</h3>
<div class="paragraph">
<p>Produces a streamed CSV download of the current resource collection.</p>
</div>
<div class="paragraph">
<p>Query parameters and behavior:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">fieldSeparator (default <code>"</code>)</dt>
<dd>
<p>Single character used to separate fields. Typical values: <code>,</code>, <code>;</code>, <code>\t</code>.</p>
</dd>
<dt class="hdlist1">requestedColumns (default refName)</dt>
<dd>
<p>Comma‑separated list of model field names to include, in output order. If omitted, BaseResource defaults to refName. Nested list extraction is supported with the <code>[0]</code> notation on a single nested property across all requested columns (e.g., <code>addresses[0].city</code>, <code>addresses[0].zip</code>). Indices other than <code>[0]</code> are rejected. If the nested list has multiple items, multiple rows are emitted per record (one per list element), preserving other column values.</p>
</dd>
<dt class="hdlist1">quotingStrategy (default QUOTE_WHERE_ESSENTIAL)</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>QUOTE_WHERE_ESSENTIAL: quote only when needed (when a value contains the separator or quoteChar).</p>
</li>
<li>
<p>QUOTE_ALL_COLUMNS: quote every column in every row.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">quoteChar (default <code>"</code>)</dt>
<dd>
<p>The character used to surround quoted values.</p>
</dd>
<dt class="hdlist1">decimalSeparator (default <code>.</code>)</dt>
<dd>
<p>Reserved for decimal formatting. Note: current implementation ignores this value; decimals are rendered using the locale‑independent dot.</p>
</dd>
<dt class="hdlist1">charsetEncoding (default UTF-8-without-BOM)</dt>
<dd>
<p>One of: <code>US-ASCII</code>, <code>UTF-8-without-BOM</code>, <code>UTF-8-with-BOM</code>, <code>UTF-16-with-BOM</code>, <code>UTF-16BE</code>, <code>UTF-16LE</code>. “with‑BOM” values write a Byte Order Mark at the beginning of the file (UTF‑8: <code>EF BB BF</code>; UTF‑16: <code>FE FF</code>).</p>
</dd>
<dt class="hdlist1">filter (optional)</dt>
<dd>
<p>ANTLR DSL filter applied server‑side before streaming (see Query Language section). Reduces rows and can improve performance.</p>
</dd>
<dt class="hdlist1">filename (default downloaded.csv)</dt>
<dd>
<p>Suggested download filename returned via Content‑Disposition header.</p>
</dd>
<dt class="hdlist1">offset (default 0)</dt>
<dd>
<p>Zero‑based index of the first record to stream.</p>
</dd>
<dt class="hdlist1">length (default 1000, use <code>-1</code> for all)</dt>
<dd>
<p>Maximum number of records to stream from offset. Use <code>-1</code> to stream all (be mindful of client memory/time).</p>
</dd>
<dt class="hdlist1">prependHeaderRow (optional boolean, default false)</dt>
<dd>
<p>When true, the first row contains column headers. Requires requestedColumns to be set (the default refName satisfies this requirement).</p>
</dd>
<dt class="hdlist1">preferredColumnNames (optional list)</dt>
<dd>
<p>Overrides header names positionally when <code>prependHeaderRow=true</code>. The list length must be ≤ requestedColumns; an empty string entry means “use default field name” for that column.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Response:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>200 OK with Content-Type: text/csv and Content-Disposition: attachment; filename="&#8230;&#8203;".</p>
</li>
<li>
<p>On validation/processing errors, the response status is 400/500 and the body contains a single text line describing the problem (e.g., “Incorrect information supplied: …”). Unrecognized query parameters are rejected with 400.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Export selected fields with header, custom filename and filter</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -H &quot;Authorization: Bearer $JWT&quot; \
     -H &quot;X-Realm: system-com&quot; \
     &quot;https://host/api/products/csv?requestedColumns=id,refName,price&amp;prependHeaderRow=true&amp;filename=products.csv&amp;filter=active:true&amp;sort=+refName&quot;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Export nested list’s first element across columns</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># emits one row per address entry when more than one is present
curl -H &quot;Authorization: Bearer $JWT&quot; \
     &quot;https://host/api/customers/csv?requestedColumns=refName,addresses[0].city,addresses[0].zip&amp;prependHeaderRow=true&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_post_csv_multipart">2.2. Import: POST /csv (multipart)</h3>
<div class="paragraph">
<p>Consumes a CSV file (multipart/form‑data) and imports records in batches. The form field name for the file is file.</p>
</div>
<div class="paragraph">
<p>Query parameters and behavior:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">fieldSeparator (default <code>"</code>)</dt>
<dd>
<p>Single character expected between fields.</p>
</dd>
<dt class="hdlist1">quotingStrategy (default QUOTE_WHERE_ESSENTIAL)</dt>
<dd>
<p>Same values as export; controls how embedded quotes are recognized.</p>
</dd>
<dt class="hdlist1">quoteChar (default <code>"</code>)</dt>
<dd>
<p>The expected quote character in the file.</p>
</dd>
<dt class="hdlist1">skipHeaderRow (default true)</dt>
<dd>
<p>When true, the first row is treated as a header and skipped. Mapping is positional, not by header names.</p>
</dd>
<dt class="hdlist1">charsetEncoding (default UTF-8-without-BOM)</dt>
<dd>
<p>The file encoding. “with‑BOM” variants allow consuming a BOM at the start.</p>
</dd>
<dt class="hdlist1">requestedColumns (required)</dt>
<dd>
<p>Comma‑separated list of model field names in the same order as the CSV columns. This positional mapping drives parsing and validation. Nested list syntax <code>[0]</code> is allowed with the same constraints as export.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Behavior:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each row is parsed into a model instance using type‑aware processors (ints, longs, decimals, enums, etc.).</p>
</li>
<li>
<p>Bean Validation is applied; rows with violations are collected as errors and not saved; valid rows are batched and saved.</p>
</li>
<li>
<p>For each saved batch, insert vs update is determined by refName presence in the repository.</p>
</li>
<li>
<p>Response entity includes counts (importedCount, failedCount) and per‑row results when available.</p>
</li>
<li>
<p>Response headers:</p>
<div class="ulist">
<ul>
<li>
<p>X-Import-Success-Count: number of rows successfully imported.</p>
</li>
<li>
<p>X-Import-Failed-Count: number of rows that failed validation or DB write.</p>
</li>
<li>
<p>X-Import-Message: summary message.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example (direct import):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X POST \
  -H &quot;Authorization: Bearer $JWT&quot; \
  -H &quot;X-Realm: system-com&quot; \
  -F &quot;file=@policies.csv&quot; \
  &quot;https://host/api/security/permission/policies/csv?requestedColumns=refName,principalId,description&amp;skipHeaderRow=true&amp;fieldSeparator=,&amp;quoteChar=\&quot;&amp;quotingStrategy=QUOTE_WHERE_ESSENTIAL&amp;charsetEncoding=UTF-8-without-BOM&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_with_preview_sessions">2.3. Import with preview sessions</h3>
<div class="paragraph">
<p>Use a two‑step flow to analyze first, then commit only valid rows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POST /csv/session (multipart): analyzes the file and creates a session</p>
<div class="ulist">
<ul>
<li>
<p>Same parameters as POST /csv (fieldSeparator, quotingStrategy, quoteChar, skipHeaderRow, charsetEncoding, requestedColumns).</p>
</li>
<li>
<p>Returns a preview ImportResult including sessionId, totals (totalRows, validRows, errorRows), and row‑level findings. No data is saved yet.</p>
</li>
</ul>
</div>
</li>
<li>
<p>POST /csv/session/{sessionId}/commit: imports only error‑free rows from the analyzed session</p>
<div class="ulist">
<ul>
<li>
<p>Returns CommitResult with inserted/updated counts.</p>
</li>
<li>
<p>DELETE /csv/session/{sessionId}: cancels and discards session state (idempotent; always returns 204).</p>
</li>
</ul>
</div>
</li>
<li>
<p>GET /csv/session/{sessionId}/rows: page through analyzed rows</p>
<div class="ulist">
<ul>
<li>
<p>Query params:</p>
</li>
<li>
<p>skip (default 0), limit (default 50)</p>
</li>
<li>
<p>onlyErrors (default false): when true, returns only rows with errors</p>
</li>
<li>
<p>intent (optional): filter rows by intended action: INSERT, UPDATE, or SKIP</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notes and constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>requestedColumns must reference actual model fields. Unknown fields or multiple different nested properties are rejected (only one nested property across requestedColumns is allowed when using [0]).</p>
</li>
<li>
<p>Unrecognized query parameters are rejected with HTTP 400 to prevent silent misconfiguration.</p>
</li>
<li>
<p>Very large exports should prefer streaming with sensible length settings or server‑side filters to reduce memory and time.</p>
</li>
<li>
<p>Imports run under the same security rules as POST / (save). Ensure the caller has permission to create/update the target entities in the chosen realm.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<h1 id="rest-crud-auth" class="sect0">Authentication and Authorization</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Quantum integrates with Quarkus security while providing a pluggable approach to authentication. The repository includes a JWT provider module to get started quickly and an extension surface to replace or complement it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jwt_provider">3. JWT Provider</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Module: quantum-jwt-provider</p>
</li>
<li>
<p>Purpose: Validate JWTs on incoming requests, populate the security principal, and surface tenant/org/user claims that feed DomainContext.</p>
</li>
<li>
<p>Configuration: Standard Quarkus/MicroProfile JWT properties plus custom claim mappings as needed for DataDomain.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pluggable_authentication">4. Pluggable Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can introduce alternative authentication mechanisms (e.g., API keys, SAML/OIDC front-channel tokens exchanged for back-end JWTs, HMAC signatures) by providing CDI beans that integrate with the security layer and emit the same normalized context consumed by DomainContext/RuleContext.</p>
</div>
<div class="paragraph">
<p>Typical steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement a request filter or identity provider that validates the token/credential.</p>
</li>
<li>
<p>Map identity and tenant claims into a principal model (tenantId, orgRefName, userId, roles).</p>
</li>
<li>
<p>Ensure BaseResource (and other entry points) can derive DomainContext from that principal.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_auth_plugin_using_the_custom_jwt_provider_as_a_reference">5. Creating an Auth Plugin (using the Custom JWT provider as a reference)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An auth plugin is typically a CDI bean that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extends BaseAuthProvider to inherit user-management helpers and persistence utilities.</p>
</li>
<li>
<p>Implements AuthProvider to integrate with request-time authentication flows.</p>
</li>
<li>
<p>Implements UserManagement to expose CRUD-style operations for users, passwords, and roles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A concrete provider should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be annotated as a CDI bean (e.g., @ApplicationScoped).</p>
</li>
<li>
<p>Provide a stable getName() identifier (e.g., "custom", "oidc", "apikey").</p>
</li>
<li>
<p>Use config properties for secrets, issuers, token durations, and any external identity provider details.</p>
</li>
<li>
<p>Build a Quarkus SecurityIdentity with the authenticated principal and roles.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authprovider_interface_what_a_provider_must_implement">6. AuthProvider interface (what a provider must implement)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Core methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SecurityIdentity validateAccessToken(String token)</p>
<div class="ulist">
<ul>
<li>
<p>Parse and validate the incoming credential (JWT, API key, signature).</p>
</li>
<li>
<p>Return a SecurityIdentity with principal name and roles; throw a security exception for invalid tokens.</p>
</li>
</ul>
</div>
</li>
<li>
<p>String getName()</p>
<div class="ulist">
<ul>
<li>
<p>A short identifier for the provider; persisted alongside credentials and used in logs/metrics.</p>
</li>
</ul>
</div>
</li>
<li>
<p>LoginResponse login(String userId, String password)</p>
<div class="ulist">
<ul>
<li>
<p>Credential-based login. Return a structured response:</p>
<div class="ulist">
<ul>
<li>
<p>positiveResponse: includes SecurityIdentity, roles, accessToken, refreshToken, expirationTime, and realm/mongodbUrl if applicable.</p>
</li>
<li>
<p>negativeResponse: includes error codes/reason/message for clients to act on (e.g., password change required).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>LoginResponse refreshTokens(String refreshToken)</p>
<div class="ulist">
<ul>
<li>
<p>Validate the refresh token, mint a new access token (and optionally a new refresh token), and return a positive response.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login flow should check force-change-password or equivalent flags and return a negative response when user interaction is required before issuing tokens.</p>
</li>
<li>
<p>validateAccessToken should only accept valid, non-expired tokens and construct SecurityIdentity consistently with role mappings used across the platform.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usermanagement_interface_operations_your_plugin_must_support">7. UserManagement interface (operations your plugin must support)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typical responsibilities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>User lifecycle</p>
<div class="ulist">
<ul>
<li>
<p>String createUser(String userId, String password, Set&lt;String&gt; roles, DomainContext domainContext, [optional] DataDomain)</p>
</li>
<li>
<p>void changePassword(String userId, String oldPassword, String newPassword, Boolean forceChangePassword)</p>
</li>
<li>
<p>boolean removeUserWithUserId(String userId)</p>
</li>
<li>
<p>boolean removeUserWithSubject(String subject)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Role management</p>
<div class="ulist">
<ul>
<li>
<p>void assignRolesForUserId(String userId, Set&lt;String&gt; roles)</p>
</li>
<li>
<p>void assignRolesForSubject(String subject, Set&lt;String&gt; roles)</p>
</li>
<li>
<p>void removeRolesForUserId(String userId, Set&lt;String&gt; roles)</p>
</li>
<li>
<p>void removeRolesForSubject(String subject, Set&lt;String&gt; roles)</p>
</li>
<li>
<p>Set&lt;String&gt; getUserRolesForUserId(String userId)</p>
</li>
<li>
<p>Set&lt;String&gt; getUserRolesForSubject(String subject)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Lookups and existence checks</p>
<div class="ulist">
<ul>
<li>
<p>Optional&lt;String&gt; getSubjectForUserId(String userId)</p>
</li>
<li>
<p>Optional&lt;String&gt; getUserIdForSubject(String subject)</p>
</li>
<li>
<p>boolean userIdExists(String userId)</p>
</li>
<li>
<p>boolean subjectExists(String subject)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Return values and exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Throw SecurityException or domain-specific exceptions for invalid states (duplicate users, bad password, unsupported hashing).</p>
</li>
<li>
<p>Return Optional for lookups that may not find a result.</p>
</li>
<li>
<p>For removals, return boolean to communicate whether a record was deleted.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leveraging_baseauthprovider_in_your_plugin">8. Leveraging BaseAuthProvider in your plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you extend BaseAuthProvider, you inherit ready-to-use capabilities that reduce boilerplate:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Impersonation controls</p>
<div class="ulist">
<ul>
<li>
<p>enableImpersonationWithUserId / enableImpersonationWithSubject</p>
</li>
<li>
<p>disableImpersonationWithUserId / disableImpersonationWithSubject</p>
</li>
<li>
<p>These set or clear an impersonation filter script and realm regex that downstream services can honor to act on behalf of another identity under controlled scope.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Realm override helpers</p>
<div class="ulist">
<ul>
<li>
<p>enableRealmOverrideWithUserId / enableRealmOverrideWithSubject</p>
</li>
<li>
<p>disableRealmOverrideWithUserId / disableRealmOverrideWithSubject</p>
</li>
<li>
<p>Useful for multi-realm/tenant scenarios, enabling scoped cross-realm behavior.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Persistence utilities</p>
<div class="ulist">
<ul>
<li>
<p>Built-in use of the credential repository to save, update, and delete credentials.</p>
</li>
<li>
<p>Consistent validation of inputs (non-null checks, non-blank checks).</p>
</li>
<li>
<p>Hashing algorithm guardrails to ensure only supported algorithms are used.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Best practices when deriving:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Always set the auth provider name in stored credentials so records can be traced to the correct provider.</p>
</li>
<li>
<p>Reuse the role merge/remove patterns to avoid accidental role loss.</p>
</li>
<li>
<p>Prefer emitting precise exceptions (e.g., NotFound for missing users, SecurityException for access violations).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_your_own_provider">9. Implementing your own provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Checklist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Class design</p>
<div class="ulist">
<ul>
<li>
<p>@ApplicationScoped bean</p>
</li>
<li>
<p>extends BaseAuthProvider</p>
</li>
<li>
<p>implements AuthProvider and UserManagement</p>
</li>
<li>
<p>return a stable getName()</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configuration</p>
<div class="ulist">
<ul>
<li>
<p>Externalize secrets (signing keys), issuers, token durations, and realm details via MicroProfile Config.</p>
</li>
</ul>
</div>
</li>
<li>
<p>SecurityIdentity</p>
<div class="ulist">
<ul>
<li>
<p>Consistently build identities with principal and roles; include useful attributes for auditing/telemetry.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tokens/credentials</p>
<div class="ulist">
<ul>
<li>
<p>For JWT-like tokens, implement robust parsing, signature verification, expiration checks, and claim validation.</p>
</li>
<li>
<p>For non-JWT credentials (API keys, HMAC), ensure replay protection and scope binding.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Responses and errors</p>
<div class="ulist">
<ul>
<li>
<p>Use structured LoginResponse for both success and error paths.</p>
</li>
<li>
<p>Prefer idempotent user/role operations; validate inputs and surface actionable messages.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_credentialuseridpassword_model_and_domaincontext">10. CredentialUserIdPassword model and DomainContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains how user credentials are represented, how those records tie to tenancy and realms, and how the server chooses the database (“realm”) for REST calls.</p>
</div>
<div class="paragraph">
<p>What the credential model represents</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">userId</dt>
<dd>
<p>The human-friendly login handle that users type. Must be unique within the applicable tenancy/realm scope.</p>
</dd>
<dt class="hdlist1">subject</dt>
<dd>
<p>A stable, system-generated identifier for the principal. Tokens and internal references favor subject over userId because subjects do not change.</p>
</dd>
<dt class="hdlist1">description, emailOfResponsibleParty</dt>
<dd>
<p>Optional metadata to describe the credential and provide an owner contact.</p>
</dd>
<dt class="hdlist1">domainContext</dt>
<dd>
<p>The tenancy and organization placement of the principal. It contains:</p>
<div class="ulist">
<ul>
<li>
<p>tenantId: Logical tenant partition.</p>
</li>
<li>
<p>orgRefName: Organization/business unit within the tenant.</p>
</li>
<li>
<p>accountId: Account or billing identifier.</p>
</li>
<li>
<p>defaultRealm: The default database/realm used for this identity’s operations.</p>
</li>
<li>
<p>dataSegment: Optional partitioning segment for advanced sharding or data slicing.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">roles</dt>
<dd>
<p>The set of authorities granted (e.g., USER, ADMIN). These become groups/roles on the SecurityIdentity.</p>
</dd>
<dt class="hdlist1">issuer</dt>
<dd>
<p>An identifier for who issued the credential or tokens (useful for auditing and multi-provider setups).</p>
</dd>
<dt class="hdlist1">passwordHash, hashingAlgorithm</dt>
<dd>
<p>The stored password hash and declared algorithm. Not exposed over REST. Providers verify passwords against this.</p>
</dd>
<dt class="hdlist1">forceChangePassword</dt>
<dd>
<p>Flag that forces a password reset on next login; the login flow returns a structured negative response instead of tokens.</p>
</dd>
<dt class="hdlist1">lastUpdate</dt>
<dd>
<p>Timestamp for auditing and token invalidation strategies.</p>
</dd>
<dt class="hdlist1">area2RealmOverrides</dt>
<dd>
<p>Optional map to route specific functional areas to different realms than the default (e.g., “Reporting” → analytics-realm).</p>
</dd>
<dt class="hdlist1">realmRegEx</dt>
<dd>
<p>Optional regex to limit or override which realms this identity may act in; also used by impersonation/override flows.</p>
</dd>
<dt class="hdlist1">impersonateFilterScript</dt>
<dd>
<p>Optional script indicating the filter/scope applied during impersonation so actions are constrained.</p>
</dd>
<dt class="hdlist1">authProviderName</dt>
<dd>
<p>The name of the provider that owns this credential (e.g., “custom”, “oidc”), enabling multi-provider operations and audits.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>How DomainContext selects the realm for REST calls</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each authenticated request, the server derives or retrieves a DomainContext associated with the principal.</p>
</li>
<li>
<p>The DomainContext.defaultRealm indicates which backing MongoDB database (“realm”) should be used by repositories for that request.</p>
</li>
<li>
<p>If realm override features are enabled (e.g., through provider helpers or per-credential overrides), the system may route certain functional areas to alternate realms using area2RealmOverrides or validated by realmRegEx.</p>
</li>
<li>
<p>The remainder of DomainContext (tenantId, orgRefName, accountId, dataSegment) is applied as scope constraints through permission rules and repository filters so reads and writes are automatically restricted to the correct tenant/org segment.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quarkus_oidc_out_of_the_box_and_integrating_with_common_idps">11. Quarkus OIDC out-of-the-box and integrating with common IdPs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus ships with first-class OpenID Connect (OIDC) support, enabling both service-to-service and browser-based logins.</p>
</div>
<div class="paragraph">
<p>What the Quarkus OIDC extension provides</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OIDC client and server-side adapters:</p>
<div class="ulist">
<ul>
<li>
<p>Authorization Code flow with PKCE for browser sign-in.</p>
</li>
<li>
<p>Bearer token authentication for APIs (validating access tokens on incoming requests).</p>
</li>
<li>
<p>Token propagation for downstream calls (forwarding or exchanging tokens).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Token verification and claim mapping:</p>
<div class="ulist">
<ul>
<li>
<p>Validates issuer, audience, signature, expiration, and scopes.</p>
</li>
<li>
<p>Maps standard claims (sub, email, groups/roles) into the security identity.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Multi-tenancy and configuration:</p>
<div class="ulist">
<ul>
<li>
<p>Supports multiple OIDC tenants via configuration, each with its own issuer, client id/secret, and flows.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Logout and session support:</p>
<div class="ulist">
<ul>
<li>
<p>Front-channel and back-channel logout hooks depending on provider capabilities.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Integrating with common providers</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Works with providers like Keycloak, Auth0, Okta, Azure AD, Cognito, and enterprise IdPs exposing OIDC.</p>
</li>
<li>
<p>Configure the issuer URL and client credentials. Quarkus discovers endpoints via the provider’s .well-known/openid-configuration.</p>
</li>
<li>
<p>For roles/permissions, map provider groups/roles claims to your platform roles in the identity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OIDC vs OAuth vs OpenID (terminology and evolution)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">OAuth 2.0</dt>
<dd>
<p>Authorization framework for delegated access (scopes), not authentication. Defines flows to obtain access tokens for APIs.</p>
</dd>
<dt class="hdlist1">OpenID (OpenID 1.x/2.0)</dt>
<dd>
<p>Older federated identity protocol that preceded OIDC. It has been superseded by OpenID Connect.</p>
</dd>
<dt class="hdlist1">OpenID Connect (OIDC)</dt>
<dd>
<p>An identity layer on top of OAuth 2.0. Adds standardized authentication, user info endpoints, ID tokens (JWT) with subject and profile claims, and discovery metadata. In practice, OIDC is the modern standard for SSO and user authentication; OAuth remains the authorization substrate underneath.</p>
</dd>
<dt class="hdlist1">Summary</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>OpenID → historical, replaced by OIDC.</p>
</li>
<li>
<p>OAuth 2.0 → authorization framework.</p>
</li>
<li>
<p>OIDC → authentication (identity) layer built on OAuth 2.0.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>OIDC and SAML in relation to SSO</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">SAML (Security Assertion Markup Language)</dt>
<dd>
<p>XML-based federation protocol widely used in enterprises for browser SSO; uses signed XML assertions transported through browser redirects/posts.</p>
</dd>
<dt class="hdlist1">OIDC</dt>
<dd>
<p>JSON/REST-oriented, uses JWTs, and is well-suited for modern SPAs and APIs.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Relationship:
* Both enable SSO and federation across identity providers and service providers.
* Many enterprise IdPs support both; OIDC is generally simpler for APIs and modern web stacks, while SAML is entrenched in legacy/enterprise SSO.</p>
</div>
<div class="paragraph">
<p>Bridging:
* Gateways or identity brokers can translate SAML assertions to OIDC tokens and vice versa, allowing gradual migration.</p>
</div>
<div class="paragraph">
<p>Common customer IdP models and OIDC integration patterns</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Centralized IdP (single-tenant)</p>
<div class="ulist">
<ul>
<li>
<p>One organization-wide IdP issues tokens for all users.</p>
</li>
<li>
<p>Configure a single OIDC tenant in Quarkus; map groups/roles to application roles.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Multi-tenant SaaS with per-tenant IdP (BYOID)</p>
<div class="ulist">
<ul>
<li>
<p>Each customer brings their own IdP.</p>
</li>
<li>
<p>Configure Quarkus OIDC multitenancy with per-tenant issuer discovery and client credentials.</p>
</li>
<li>
<p>Tenant selection can be based on domain, request header, or path; the selected OIDC tenant performs login and token validation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Brokered identity</p>
<div class="ulist">
<ul>
<li>
<p>Use a broker that federates to multiple upstream IdPs (OIDC, SAML).</p>
</li>
<li>
<p>Quarkus integrates with the broker as a single OIDC client; the broker handles IdP routing and protocol translation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Hybrid API and web flows</p>
<div class="ulist">
<ul>
<li>
<p>Browser apps use Authorization Code flow with sessions; APIs use bearer token authentication.</p>
</li>
<li>
<p>The OIDC extension can handle both in the same application when properly configured.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authorization_via_rulecontext">12. Authorization via RuleContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Authentication establishes identity; RuleContext enforces what the identity can do. For each action (CREATE, UPDATE, VIEW, DELETE, ARCHIVE), RuleContext can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allow or deny the action</p>
</li>
<li>
<p>Contribute additional filters (e.g., org scoping, functional-area specific sharing)</p>
</li>
<li>
<p>Adjust UIActionList to reflect permitted next steps</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This division of responsibilities keeps providers focused on identity while policies remain centralized in RuleContext.</p>
</div>
<div class="sect2">
<h3 id="ontology-rest-crud">12.1. Using Ontology Edges in List Endpoints (optional)</h3>
<div class="paragraph">
<p>When ontology is enabled and edges are materialized, list endpoints can avoid deep joins or multi-collection traversals by rewriting queries based on semantic relationships.</p>
</div>
<div class="paragraph">
<p>Pattern A: Wrap BSON with ListQueryRewriter</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Bson base = Filters.and(existingFilters...);
Bson rewritten = rewriter.rewriteForHasEdge(base, tenantId, <span class="string"><span class="delimiter">&quot;</span><span class="content">placedInOrg</span><span class="delimiter">&quot;</span></span>, orgRefName);
collection.find(rewritten).iterator();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pattern B: Constrain Morphia query by IDs</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; ids = edgeDao.srcIdsByDst(tenantId, <span class="string"><span class="delimiter">&quot;</span><span class="content">orderShipsToRegion</span><span class="delimiter">&quot;</span></span>, region);
<span class="keyword">if</span> (!ids.isEmpty()) {
  query.filter(dev.morphia.query.filters.Filters.in(<span class="string"><span class="delimiter">&quot;</span><span class="content">_id</span><span class="delimiter">&quot;</span></span>, ids));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Always scope by tenantId from DomainContext/RuleContext.</p>
</li>
<li>
<p>Index edges on (tenantId, p, dst) and (tenantId, src, p) to keep queries fast.</p>
</li>
<li>
<p>See <a href="ontology.html#ontology-integration-morphia-permissions">Integrating Ontology</a> for more integration options.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2.2-SNAPSHOT<br>
Last updated 2025-11-11 20:41:57 -0600
</div>
</div>
</body>
</html>