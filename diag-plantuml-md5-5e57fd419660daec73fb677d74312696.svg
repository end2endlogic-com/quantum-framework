<svg contentStyleType='text/css' data-diagram-type='ACTIVITY' height='605px' preserveAspectRatio='none' style='width:771px;height:605px;background:#FFFFFF;' version='1.1' viewBox='0 0 771 605' width='771px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><ellipse cx='441.7437' cy='20' fill='#222222' rx='10' ry='10' style='stroke:#222222;stroke-width:1;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='205.6895' x='338.8989' y='50'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='185.6895' x='348.8989' y='71.6016'>Matched rules (in priority order)</text><rect fill='#F1F1F1' height='62.3984' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='238.1094' x='322.689' y='104.1328'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='88.2305' x='332.689' y='125.7344'>For each rule r:</text><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='218.1094' x='332.689' y='139.8672'>if (andFilterString present?) then (yes)</text><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='162.8262' x='340.2827' y='154'>:parse -&gt; andFilters += A_r</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='170.7266' x='356.3804' y='235.0088'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='150.7266' x='366.3804' y='256.6104'>parse -&gt; orFilters += O_r</text><polygon fill='#F1F1F1' points='374.9165,289.1416,508.5708,289.1416,520.5708,301.1416,508.5708,313.1416,374.9165,313.1416,362.9165,301.1416,374.9165,289.1416' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='133.6543' x='374.9165' y='305.2988'>both groups non-empty?</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='17.4829' x='345.4336' y='298.8213'>yes</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='64.4692' x='520.5708' y='298.8213'>one or none</text><polygon fill='#F1F1F1' points='189.2087,323.1416,321.1174,323.1416,333.1174,335.1416,321.1174,347.1416,189.2087,347.1416,177.2087,335.1416,189.2087,323.1416' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='131.9087' x='189.2087' y='339.2988'>joinOp == AND [default]</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='50.4292' x='126.7795' y='332.8213'>AND-join</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='41.9751' x='333.1174' y='332.8213'>OR-join</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='236.4688' x='11' y='357.1416'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='216.4688' x='21' y='378.7432'>E_r = AND( AND(all A_r), OR(all O_r) )</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='227.2461' x='267.4688' y='357.1416'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='207.2461' x='277.4688' y='378.7432'>E_r = OR( OR(all O_r), AND(all A_r) )</text><polygon fill='#F1F1F1' points='255.1631,397.2744,267.1631,409.2744,255.1631,421.2744,243.1631,409.2744,255.1631,397.2744' style='stroke:#181818;stroke-width:0.5;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='207.2188' x='524.7148' y='323.1416'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='187.2188' x='534.7148' y='344.7432'>E_r = AND(all A_r) or OR(all O_r)</text><polygon fill='#F1F1F1' points='441.7437,427.2744,453.7437,439.2744,441.7437,451.2744,429.7437,439.2744,441.7437,427.2744' style='stroke:#181818;stroke-width:0.5;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='152.6094' x='365.439' y='471.2744'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='132.6094' x='375.439' y='492.876'>add E_r to query filters</text><polygon fill='#F1F1F1' points='391.5454,525.4072,491.9419,525.4072,503.9419,537.4072,491.9419,549.4072,391.5454,549.4072,379.5454,537.4072,391.5454,525.4072' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='100.3965' x='391.5454' y='541.5645'>r.finalRule == true</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='17.4829' x='503.9419' y='535.0869'>yes</text><ellipse cx='543.4248' cy='537.4072' fill='none' rx='11' ry='11' style='stroke:#222222;stroke-width:1;'/><ellipse cx='543.4248' cy='537.4072' fill='#222222' rx='6' ry='6' style='stroke:#222222;stroke-width:1;'/><polygon fill='#F1F1F1' points='382.7368,186.5313,500.7505,186.5313,512.7505,198.5313,500.7505,210.5313,382.7368,210.5313,370.7368,198.5313,382.7368,186.5313' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='17.4829' x='445.7437' y='221.166'>yes</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='118.0137' x='382.7368' y='202.6885'>orFilterString present?</text><polygon fill='#F1F1F1' points='441.7437,569.4072,453.7437,581.4072,441.7437,593.4072,429.7437,581.4072,441.7437,569.4072' style='stroke:#181818;stroke-width:0.5;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='30' y2='50'/><polygon fill='#181818' points='437.7437,40,441.7437,50,445.7437,40,441.7437,44' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='84.1328' y2='104.1328'/><polygon fill='#181818' points='437.7437,94.1328,441.7437,104.1328,445.7437,94.1328,441.7437,98.1328' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='177.2087' x2='129.2344' y1='335.1416' y2='335.1416'/><line style='stroke:#181818;stroke-width:1;' x1='129.2344' x2='129.2344' y1='335.1416' y2='357.1416'/><polygon fill='#181818' points='125.2344,347.1416,129.2344,357.1416,133.2344,347.1416,129.2344,351.1416' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='333.1174' x2='381.0918' y1='335.1416' y2='335.1416'/><line style='stroke:#181818;stroke-width:1;' x1='381.0918' x2='381.0918' y1='335.1416' y2='357.1416'/><polygon fill='#181818' points='377.0918,347.1416,381.0918,357.1416,385.0918,347.1416,381.0918,351.1416' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='129.2344' x2='129.2344' y1='391.2744' y2='409.2744'/><line style='stroke:#181818;stroke-width:1;' x1='129.2344' x2='243.1631' y1='409.2744' y2='409.2744'/><polygon fill='#181818' points='233.1631,405.2744,243.1631,409.2744,233.1631,413.2744,237.1631,409.2744' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='381.0918' x2='381.0918' y1='391.2744' y2='409.2744'/><line style='stroke:#181818;stroke-width:1;' x1='381.0918' x2='267.1631' y1='409.2744' y2='409.2744'/><polygon fill='#181818' points='277.1631,405.2744,267.1631,409.2744,277.1631,413.2744,273.1631,409.2744' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='362.9165' x2='255.1631' y1='301.1416' y2='301.1416'/><line style='stroke:#181818;stroke-width:1;' x1='255.1631' x2='255.1631' y1='301.1416' y2='323.1416'/><polygon fill='#181818' points='251.1631,313.1416,255.1631,323.1416,259.1631,313.1416,255.1631,317.1416' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='520.5708' x2='628.3242' y1='301.1416' y2='301.1416'/><line style='stroke:#181818;stroke-width:1;' x1='628.3242' x2='628.3242' y1='301.1416' y2='323.1416'/><polygon fill='#181818' points='624.3242,313.1416,628.3242,323.1416,632.3242,313.1416,628.3242,317.1416' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='255.1631' x2='255.1631' y1='421.2744' y2='439.2744'/><line style='stroke:#181818;stroke-width:1;' x1='255.1631' x2='429.7437' y1='439.2744' y2='439.2744'/><polygon fill='#181818' points='419.7437,435.2744,429.7437,439.2744,419.7437,443.2744,423.7437,439.2744' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='628.3242' x2='628.3242' y1='357.2744' y2='439.2744'/><line style='stroke:#181818;stroke-width:1;' x1='628.3242' x2='453.7437' y1='439.2744' y2='439.2744'/><polygon fill='#181818' points='463.7437,435.2744,453.7437,439.2744,463.7437,443.2744,459.7437,439.2744' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='269.1416' y2='289.1416'/><polygon fill='#181818' points='437.7437,279.1416,441.7437,289.1416,445.7437,279.1416,441.7437,283.1416' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='451.2744' y2='471.2744'/><polygon fill='#181818' points='437.7437,461.2744,441.7437,471.2744,445.7437,461.2744,441.7437,465.2744' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='549.4072' y2='569.4072'/><polygon fill='#181818' points='437.7437,559.4072,441.7437,569.4072,445.7437,559.4072,441.7437,563.4072' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='503.9419' x2='532.4248' y1='537.4072' y2='537.4072'/><polygon fill='#181818' points='522.4248,533.4072,532.4248,537.4072,522.4248,541.4072,526.4248,537.4072' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='505.4072' y2='525.4072'/><polygon fill='#181818' points='437.7437,515.4072,441.7437,525.4072,445.7437,515.4072,441.7437,519.4072' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='210.5313' y2='235.0088'/><polygon fill='#181818' points='437.7437,225.0088,441.7437,235.0088,445.7437,225.0088,441.7437,229.0088' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='512.7505' x2='745.9336' y1='198.5313' y2='198.5313'/><polygon fill='#181818' points='741.9336,413.708,745.9336,423.708,749.9336,413.708,745.9336,417.708' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='745.9336' x2='745.9336' y1='198.5313' y2='581.4072'/><line style='stroke:#181818;stroke-width:1;' x1='745.9336' x2='453.7437' y1='581.4072' y2='581.4072'/><polygon fill='#181818' points='463.7437,577.4072,453.7437,581.4072,463.7437,585.4072,459.7437,581.4072' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='441.7437' x2='441.7437' y1='166.5313' y2='186.5313'/><polygon fill='#181818' points='437.7437,176.5313,441.7437,186.5313,445.7437,176.5313,441.7437,180.5313' style='stroke:#181818;stroke-width:1;'/></g></svg>