seedPack: system-initialize
version: 1.0.0

# Apply globally; idempotency is enforced per-realm by the registry and natural keys
scope:
  type: GLOBAL

datasets:
  # Counters (e.g., accountNumber). Upsert by refName
  - collection: counter
    modelClass: com.e2eq.framework.model.persistent.base.Counter
    repoClass: com.e2eq.framework.model.persistent.morphia.CounterRepo
    naturalKey: [refName]
    file: classpath:seed-packs/system-initialize/datasets/counters.jsonl

  # Default user policy equivalent to InitializeDatabase.createInitialRules()
  - collection: policy
    modelClass: com.e2eq.framework.model.security.Policy
    repoClass: com.e2eq.framework.model.persistent.morphia.PolicyRepo
    naturalKey: [refName]
    file: classpath:seed-packs/system-initialize/datasets/policies-default-user.jsonl
