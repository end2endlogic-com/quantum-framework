<svg contentStyleType='text/css' data-diagram-type='ACTIVITY' height='461px' preserveAspectRatio='none' style='width:492px;height:461px;background:#FFFFFF;' version='1.1' viewBox='0 0 492 461' width='492px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><ellipse cx='246.3691' cy='20' fill='#222222' rx='10' ry='10' style='stroke:#222222;stroke-width:1;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='153.6465' x='169.5459' y='50'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='133.6465' x='179.5459' y='71.6016'>Incoming REST request</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='337.168' x='77.7852' y='104.1328'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='317.168' x='87.7852' y='125.7344'>Code-level annotations (@RolesAllowed, @PermitAll...)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='213.1016' x='139.8184' y='158.2656'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='193.1016' x='149.8184' y='179.8672'>Feature flags (exposure/variants)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='470.7383' x='11' y='212.3984'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='450.7383' x='21' y='234'>Permission Rules (SecurityURI) - ALLOW/DENY + optional postconditionScript</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='234.9102' x='128.9141' y='266.5313'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='214.9102' x='138.9141' y='288.1328'>Decision + optional repository filters</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='252.084' x='120.3271' y='320.6641'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='232.084' x='130.3271' y='342.2656'>Repo layer applies filters (MorphiaRepo)</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='35.8906' x='228.4238' y='374.7969'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='15.8906' x='238.4238' y='396.3984'>DB</text><ellipse cx='246.3691' cy='439.9297' fill='none' rx='11' ry='11' style='stroke:#222222;stroke-width:1;'/><ellipse cx='246.3691' cy='439.9297' fill='#222222' rx='6' ry='6' style='stroke:#222222;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='30' y2='50'/><polygon fill='#181818' points='242.3691,40,246.3691,50,250.3691,40,246.3691,44' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='84.1328' y2='104.1328'/><polygon fill='#181818' points='242.3691,94.1328,246.3691,104.1328,250.3691,94.1328,246.3691,98.1328' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='138.2656' y2='158.2656'/><polygon fill='#181818' points='242.3691,148.2656,246.3691,158.2656,250.3691,148.2656,246.3691,152.2656' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='192.3984' y2='212.3984'/><polygon fill='#181818' points='242.3691,202.3984,246.3691,212.3984,250.3691,202.3984,246.3691,206.3984' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='246.5313' y2='266.5313'/><polygon fill='#181818' points='242.3691,256.5313,246.3691,266.5313,250.3691,256.5313,246.3691,260.5313' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='300.6641' y2='320.6641'/><polygon fill='#181818' points='242.3691,310.6641,246.3691,320.6641,250.3691,310.6641,246.3691,314.6641' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='354.7969' y2='374.7969'/><polygon fill='#181818' points='242.3691,364.7969,246.3691,374.7969,250.3691,364.7969,246.3691,368.7969' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='246.3691' x2='246.3691' y1='408.9297' y2='428.9297'/><polygon fill='#181818' points='242.3691,418.9297,246.3691,428.9297,250.3691,418.9297,246.3691,422.9297' style='stroke:#181818;stroke-width:1;'/></g></svg>