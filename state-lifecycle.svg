<svg contentStyleType='text/css' data-diagram-type='ACTIVITY' height='569px' preserveAspectRatio='none' style='width:836px;height:569px;background:#FFFFFF;' version='1.1' viewBox='0 0 836 569' width='836px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' zoomAndPan='magnify'><defs/><g><rect fill='none' height='21.1992' style='stroke:none;stroke-width:1;' width='803.5693' x='15' y='12.2969'/><ellipse cx='73.6914' cy='48.4961' fill='#222222' rx='10' ry='10' style='stroke:#222222;stroke-width:1;'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='105.3828' x='21' y='78.4961'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='85.3828' x='31' y='100.0977'>Create request</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='185.5859' x='75.9307' y='339.0273'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='165.5859' x='85.9307' y='360.6289'>Return 409/422 with reason</text><ellipse cx='73.6914' cy='546.4258' fill='none' rx='11' ry='11' style='stroke:#222222;stroke-width:1;'/><ellipse cx='73.6914' cy='546.4258' fill='#222222' rx='6' ry='6' style='stroke:#222222;stroke-width:1;'/><line style='stroke:#000000;stroke-width:1.5;' x1='15' x2='15' y1='12.2969' y2='557.4258'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='128.1113' x='379.7646' y='132.6289'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='108.1113' x='389.7646' y='154.2305'>Validate command</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='150.5762' x='368.5322' y='186.7617'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='130.5762' x='378.5322' y='208.3633'>Apply transition intent</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='154.543' x='271.5166' y='339.0273'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='134.543' x='281.5166' y='360.6289'>Mutate aggregate state</text><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='134.5625' x='281.5068' y='447.293'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='114.5625' x='291.5068' y='468.8945'>Emit domain events</text><line style='stroke:#000000;stroke-width:1.5;' x1='265.5166' x2='265.5166' y1='12.2969' y2='557.4258'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='163.4434' x='529.1084' y='240.8945'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='143.4434' x='539.1084' y='262.4961'>Check allowed transition</text><polygon fill='#F1F1F1' points='588.1506,295.0273,633.5095,295.0273,645.5095,307.0273,633.5095,319.0273,588.1506,319.0273,576.1506,307.0273,588.1506,295.0273' style='stroke:#181818;stroke-width:0.5;'/><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='45.3589' x='588.1506' y='311.1846'>allowed?</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='17.4829' x='558.6677' y='304.707'>yes</text><text fill='#000000' font-family='sans-serif' font-size='11' lengthAdjust='spacing' textLength='13.5835' x='645.5095' y='304.707'>no</text><polygon fill='#F1F1F1' points='610.8301,491.4258,622.8301,503.4258,610.8301,515.4258,598.8301,503.4258,610.8301,491.4258' style='stroke:#181818;stroke-width:0.5;'/><line style='stroke:#000000;stroke-width:1.5;' x1='523.1084' x2='523.1084' y1='12.2969' y2='557.4258'/><rect fill='#F1F1F1' height='34.1328' rx='12.5' ry='12.5' style='stroke:#181818;stroke-width:0.5;' width='110.1699' x='702.5518' y='393.1602'/><text fill='#000000' font-family='sans-serif' font-size='12' lengthAdjust='spacing' textLength='90.1699' x='712.5518' y='414.7617'>Persist changes</text><line style='stroke:#000000;stroke-width:1.5;' x1='696.5518' x2='696.5518' y1='12.2969' y2='557.4258'/><line style='stroke:#000000;stroke-width:1.5;' x1='816.7217' x2='816.7217' y1='12.2969' y2='557.4258'/><line style='stroke:#181818;stroke-width:1;' x1='73.6914' x2='73.6914' y1='58.4961' y2='78.4961'/><polygon fill='#181818' points='69.6914,68.4961,73.6914,78.4961,77.6914,68.4961,73.6914,72.4961' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='443.8203' x2='443.8203' y1='166.7617' y2='186.7617'/><polygon fill='#181818' points='439.8203,176.7617,443.8203,186.7617,447.8203,176.7617,443.8203,180.7617' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='610.8301' x2='610.8301' y1='275.0273' y2='295.0273'/><polygon fill='#181818' points='606.8301,285.0273,610.8301,295.0273,614.8301,285.0273,610.8301,289.0273' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='73.6914' x2='73.6914' y1='112.6289' y2='117.6289'/><line style='stroke:#181818;stroke-width:1;' x1='73.6914' x2='443.8203' y1='117.6289' y2='117.6289'/><line style='stroke:#181818;stroke-width:1;' x1='443.8203' x2='443.8203' y1='117.6289' y2='132.6289'/><polygon fill='#181818' points='439.8203,122.6289,443.8203,132.6289,447.8203,122.6289,443.8203,126.6289' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='443.8203' x2='443.8203' y1='220.8945' y2='225.8945'/><line style='stroke:#181818;stroke-width:1;' x1='443.8203' x2='610.8301' y1='225.8945' y2='225.8945'/><line style='stroke:#181818;stroke-width:1;' x1='610.8301' x2='610.8301' y1='225.8945' y2='240.8945'/><polygon fill='#181818' points='606.8301,230.8945,610.8301,240.8945,614.8301,230.8945,610.8301,234.8945' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='348.7881' y1='373.1602' y2='378.1602'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='757.6367' y1='378.1602' y2='378.1602'/><line style='stroke:#181818;stroke-width:1;' x1='757.6367' x2='757.6367' y1='378.1602' y2='393.1602'/><polygon fill='#181818' points='753.6367,383.1602,757.6367,393.1602,761.6367,383.1602,757.6367,387.1602' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='757.6367' x2='757.6367' y1='427.293' y2='432.293'/><line style='stroke:#181818;stroke-width:1;' x1='757.6367' x2='348.7881' y1='432.293' y2='432.293'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='348.7881' y1='432.293' y2='447.293'/><polygon fill='#181818' points='344.7881,437.293,348.7881,447.293,352.7881,437.293,348.7881,441.293' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='576.1506' x2='348.7881' y1='307.0273' y2='307.0273'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='348.7881' y1='307.0273' y2='339.0273'/><polygon fill='#181818' points='344.7881,329.0273,348.7881,339.0273,352.7881,329.0273,348.7881,333.0273' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='645.5095' x2='657.5095' y1='307.0273' y2='307.0273'/><line style='stroke:#181818;stroke-width:1;' x1='657.5095' x2='657.5095' y1='307.0273' y2='325.0273'/><line style='stroke:#181818;stroke-width:1;' x1='657.5095' x2='168.7236' y1='325.0273' y2='325.0273'/><line style='stroke:#181818;stroke-width:1;' x1='168.7236' x2='168.7236' y1='325.0273' y2='339.0273'/><polygon fill='#181818' points='164.7236,329.0273,168.7236,339.0273,172.7236,329.0273,168.7236,333.0273' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='348.7881' y1='481.4258' y2='503.4258'/><line style='stroke:#181818;stroke-width:1;' x1='348.7881' x2='598.8301' y1='503.4258' y2='503.4258'/><polygon fill='#181818' points='588.8301,499.4258,598.8301,503.4258,588.8301,507.4258,592.8301,503.4258' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='168.7236' x2='168.7236' y1='373.1602' y2='485.4258'/><line style='stroke:#181818;stroke-width:1;' x1='168.7236' x2='640.8301' y1='485.4258' y2='485.4258'/><line style='stroke:#181818;stroke-width:1;' x1='640.8301' x2='640.8301' y1='485.4258' y2='503.4258'/><line style='stroke:#181818;stroke-width:1;' x1='640.8301' x2='622.8301' y1='503.4258' y2='503.4258'/><polygon fill='#181818' points='632.8301,499.4258,622.8301,503.4258,632.8301,507.4258,628.8301,503.4258' style='stroke:#181818;stroke-width:1;'/><line style='stroke:#181818;stroke-width:1;' x1='610.8301' x2='610.8301' y1='515.4258' y2='520.4258'/><line style='stroke:#181818;stroke-width:1;' x1='610.8301' x2='73.6914' y1='520.4258' y2='520.4258'/><line style='stroke:#181818;stroke-width:1;' x1='73.6914' x2='73.6914' y1='520.4258' y2='535.4258'/><polygon fill='#181818' points='69.6914,525.4258,73.6914,535.4258,77.6914,525.4258,73.6914,529.4258' style='stroke:#181818;stroke-width:1;'/><text fill='#000000' font-family='sans-serif' font-size='18' lengthAdjust='spacing' textLength='27.5537' x='126.4814' y='29.6992'>API</text><text fill='#000000' font-family='sans-serif' font-size='18' lengthAdjust='spacing' textLength='134.209' x='327.208' y='29.6992'>Domain Service</text><text fill='#000000' font-family='sans-serif' font-size='18' lengthAdjust='spacing' textLength='95.9414' x='561.8594' y='29.6992'>StateGraph</text><text fill='#000000' font-family='sans-serif' font-size='18' lengthAdjust='spacing' textLength='43.7959' x='734.7388' y='29.6992'>Repo</text></g></svg>